"use strict";window.const={keyCode:{ENTER:13,ESC:27},resolution:{DESKTOP:1200,TABLET:768,MOBILE:320}},function(){var e=document.querySelector(".js_cookie"),t=document.querySelector(".js_cookie .js_btn");e&&t&&t.addEventListener("click",function(){e.classList.add("js_hide")})}(),function(){var t=document.querySelector(".filter");if(t){var e=t.querySelector(".filter__open-btn");t.classList.add("filter--js"),e.addEventListener("click",function(e){t.classList.toggle("filter--open"),e.currentTarget.textContent=t.classList.contains("filter--open")?"Скрыть фильтры":"Фильтры"})}}(),function(){var e=document.querySelectorAll(".form-select");e.length&&Array.prototype.forEach.call(e,function(r){var c=r.querySelector(".form-select__group"),l=r.querySelector(".form-select__title"),o=r.querySelectorAll(".form-select__option");if(c||l||o.length){document.addEventListener("keydown",function(e){27===e.keyCode&&n()}),document.addEventListener("click",function(e){var t=e.target;t===l?(e.preventDefault(),c.classList.toggle("form-select__group--active"),l.classList.toggle("form-select__title--open")):Array.prototype.forEach.call(o,function(e){t===e?function(e){for(var t=e.getAttribute("data-value"),o=e.parentNode.childNodes,n=0;n<o.length;n++)o[n]instanceof HTMLParagraphElement&&(t===o[n].getAttribute("data-value")?o[n].classList.add("form-select__option--active"):o[n].classList.remove("form-select__option--active"));r.querySelector('input[type="hidden"]').value=t,r.querySelector(".form-select__title-text").textContent=t,c.classList.contains("form-select__group--active")&&c.classList.remove("form-select__group--active"),l.classList.contains("form-select__title--open")&&l.classList.remove("form-select__title--open")}(e):n()})});var e=r.querySelector(".form-select__scrollbar-content");e&&window.Scrollbar.init(e,o)}function n(){c.classList.contains("form-select__group--active")&&c.classList.remove("form-select__group--active"),l.classList.contains("form-select__title--open")&&l.classList.remove("form-select__title--open")}})}(),function(){var t=document.querySelector(".gallery-popup");if(t){var e=t.querySelector(".popup__overlay"),o=t.querySelector(".popup__close-btn"),r=t.querySelector(".swiper-container"),c=t.querySelector(".gallery-popup__nav-btn--prev"),l=t.querySelector(".gallery-popup__nav-btn--next"),s=t.querySelector(".gallery-popup__photo-description"),i=t.querySelector(".gallery-popup__counter-current"),a=t.querySelector(".gallery-popup__counter-total"),u=null,n=function(){u.destroy(),r.innerHTML="",bodyScrollLock.enableBodyScroll(t),t.classList.remove("popup--shown")};e.addEventListener("click",n),o.addEventListener("click",n),document.addEventListener("click",function(e){e.target.classList.contains("gallery__item-link")&&(e.preventDefault(),function(e){var t=e.parentElement.parentElement.children,o=e.querySelector(".gallery__item-text"),n=document.createElement("div");n.classList.add("swiper-wrapper"),Array.prototype.forEach.call(t,function(e){var t=e.querySelector(".gallery__item").cloneNode(!0);t.classList.add("swiper-slide"),n.appendChild(t)}),r.appendChild(n),u=new Swiper(r,{initialSlide:+e.dataset.index,slidesPerView:1,watchOverflow:!0,grabCursor:!0,loop:!0,navigation:{prevEl:c,nextEl:l},on:{slideChange:function(){s.textContent=t[this.realIndex].querySelector(".gallery__item-text").textContent,i.textContent=+this.realIndex+1}}}),s.textContent=o.textContent,i.textContent=+e.dataset.index+1,a.textContent=t.length}(e.target),bodyScrollLock.disableBodyScroll(t),t.classList.add("popup--shown"))}),document.addEventListener("keydown",function(e){e.keyCode===window.const.keyCode.ESC&&t.classList.contains("popup--shown")&&(e.preventDefault(),n())})}}(),function(){var e=document.querySelectorAll(".gallery");if(e.length){e.forEach(function(e){e.querySelectorAll(".gallery__item-link").forEach(function(e,t){e.dataset.index=t}),new Swiper(e,{slidesPerView:"auto",spaceBetween:16,breakpoints:{320:{spaceBetween:12}},watchOverflow:!0,grabCursor:!0})})}}(),function(){var e=document.querySelector(".location-switcher");e&&e.classList.add("location-switcher--js")}(),function(){var e=document.querySelector(".page-header");if(e){var t=e.querySelector(".page-header__bar"),o=e.querySelector(".main-menu"),n=o.querySelector(".container"),r=e.querySelector(".menu-btn"),c=r.querySelector(".menu-btn__text"),l=function(){o.style.height=e.classList.contains("page-header--open-menu")&&document.documentElement.clientWidth<window.const.resolution.DESKTOP?window.innerHeight-t.offsetHeight+"px":""};r.addEventListener("click",function(){e.classList.toggle("page-header--open-menu"),l(),e.classList.contains("page-header--open-menu")?(bodyScrollLock.disableBodyScroll(n),r.classList.add("menu-btn--close"),c.textContent="Закрыть меню"):(bodyScrollLock.enableBodyScroll(n),r.classList.remove("menu-btn--close"),c.textContent="Открыть меню")}),window.addEventListener("resize",function(){l(),e.classList.contains("page-header--open-menu")&&document.documentElement.clientWidth>=window.const.resolution.DESKTOP&&(e.classList.remove("page-header--open-menu"),r.classList.remove("menu-btn--close"),document.body.classList.remove("page-body--no-scroll"))})}}(),function(){var e=document.querySelector(".page-header");if(e){var t=function(){0<window.pageYOffset?e.classList.add("page-header--above-content"):e.classList.remove("page-header--above-content")},o=function(){document.body.style.paddingTop=e.offsetHeight+"px"};e.classList.add("page-header--js"),t(),o(),document.addEventListener("scroll",t),window.addEventListener("resize",function(){o()})}}(),function(){var e=document.querySelectorAll(".project-page__text");if(e.length){var t=document.documentElement.clientWidth,o=!1,n=function(e){e.target.classList.contains("project-page__text-btn")&&function(e){var t=e.parentElement,o=t.querySelector(".project-page__text-container"),n=e.querySelector(".project-page__text-btn-caption");t.classList.toggle("project-page__text--collapsed"),t.classList.contains("project-page__text--collapsed")?(o.style.height="190px",n.textContent="Показать полностью"):(o.style.height=o.scrollHeight+"px",n.textContent="Скрыть")}(e.target)},r=function(){Array.prototype.forEach.call(e,function(e){var t=e.querySelector(".project-page__text-container");190<t.scrollHeight&&(e.classList.add("project-page__text--collapsed","project-page__text--js"),t.style.height="190px")}),document.addEventListener("click",n),o=!0};t<window.const.resolution.TABLET&&r(),window.addEventListener("resize",function(){if(t!==document.documentElement.clientWidth)if((t=document.documentElement.clientWidth)<window.const.resolution.TABLET){if(o)return;r()}else Array.prototype.forEach.call(e,function(e){var t=e.querySelector(".project-page__text-container"),o=e.querySelector(".project-page__text-btn-caption");e.classList.remove("project-page__text--collapsed","project-page__text--js"),t.style.height="",o.textContent="Показать полностью"}),document.removeEventListener("click",n),o=!1})}}(),function(){var e=document.querySelector(".project-page__vote");e&&(e.classList.add("project-page__vote--js"),new Sticky(".project-page__vote"))}(),function(){var e=document.querySelector(".projects__list");if(e){var t=Ellipsis({lines:3}),o=e.querySelectorAll(".project-item__title");t.add(o)}}(),function(){var o="js_hide",e=document.querySelector(".js_short_list"),t=document.querySelector(".js_short_list + .js_show_all");if(e&&t){var n=e.querySelectorAll("li");n.forEach(function(e,t){4<t&&e.classList.add(o)}),t.addEventListener("click",function(){n.forEach(function(e){e.classList.remove(o),t.classList.add(o)})})}}(),function(){var e=document.querySelector(".user-menu");if(e){var t=e.querySelector(".user-menu__dropdown-btn"),o=t.querySelector(".user-menu__dropdown-btn-text"),n=e.querySelector(".user-menu__overlay"),r=e.querySelector(".user-menu__list"),c=function(){e.classList.remove("user-menu--open"),n.classList.remove("user-menu__overlay--shown"),o.textContent="Открыть меню"};t.addEventListener("click",function(){e.classList.toggle("user-menu--open"),n.classList.toggle("user-menu__overlay--shown"),r.style.height=0===r.offsetHeight?r.scrollHeight+"px":"",o.textContent=e.classList.contains("user-menu--open")?"Закрыть меню":"Открыть меню"}),n.addEventListener("click",c),document.addEventListener("keydown",function(e){e.keyCode===window.const.keyCode.ESC&&n.classList.contains("user-menu__overlay--shown")&&(e.preventDefault(),c())})}}();