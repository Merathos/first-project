"use strict";!function(){var e=document.querySelectorAll(".js-button-favorive");if(e){e.forEach(function(e){e.addEventListener("click",t)})}function t(e){e.target.classList.toggle("button-star--active")}}(),function(){function e(e,n){Array.prototype.forEach.call(e,function(e){e.addEventListener("click",function(e){e.preventDefault(),window.openPopup(n);var t=n.querySelectorAll(".js-text-hidden");t.length&&window.openText(t),window.initTable()})})}var t=document.querySelector(".js-comment-popup--add"),n=document.querySelectorAll(".js-comment-add");t&&n.length&&e(n,t);var o=document.querySelector(".js-comment-popup--edit"),i=document.querySelectorAll(".js-comment-edit");o&&i.length&&e(i,o);var r=document.querySelector(".js-comment-popup--your"),s=document.querySelectorAll(".js-comment-your");r&&s.length&&e(s,r);var l=document.querySelector(".js-table-popup"),a=document.querySelectorAll(".js-table");l&&a.length&&e(a,l);var c=document.querySelector(".js-comment-popup--table"),u=document.querySelectorAll(".js-comment-table");c&&u.length&&e(u,c)}(),function(){if(document.querySelector(".commentary-add")){var e=document.querySelector(".commentary-add__textarea"),t=e.querySelector("textarea"),n=e.querySelector("#textarea-error-field");t.addEventListener("input",function(){500<=t.value.length?(e.classList.add("commentary-add__textarea--warning"),n.textContent="Осталось символов: "+Math.abs(1e3-t.value.length)):e.classList.remove("commentary-add__textarea--warning"),1e3<=t.value.length?(e.classList.add("commentary-add__textarea--error"),n.textContent="Вы превысили лимит символов на "+Math.abs(1e3-t.value.length)):e.classList.remove("commentary-add__textarea--error")})}}(),function(){if(document.querySelector("#edit-comment")){var s=document.querySelector(".hearings__comments"),l=document.querySelector(".your-comment"),a=document.querySelector("#edit-comment-block"),e=l.querySelector("#edit-comment"),t=l.querySelector("#delete-comment"),c=l.querySelector(".your-comment__text");t.addEventListener("click",function(e){e.preventDefault(),l.remove()}),e.addEventListener("click",function(e){e.preventDefault(),l.classList.add("visually-hidden");var t=a.content.firstElementChild.cloneNode(!0),n=t.querySelector(".commentary-add__textarea"),o=n.querySelector("textarea"),i=n.querySelector("#textarea-error-field"),r=t.querySelector("#commentary-save");t.querySelector("textarea").value=c.innerText,o.addEventListener("input",function(){500<=o.value.length?(n.classList.add("commentary-add__textarea--warning"),i.textContent="Осталось символов: "+Math.abs(1e3-o.value.length)):n.classList.remove("commentary-add__textarea--warning"),1e3<=o.value.length?(n.classList.add("commentary-add__textarea--error"),i.textContent="Вы превысили лимит символов на "+Math.abs(1e3-o.value.length)):n.classList.remove("commentary-add__textarea--error")}),r.addEventListener("click",function(){e.preventDefault(),0<o.value.length&&o.value.length<1e3&&(c.innerText=o.value,t.remove(),l.classList.remove("visually-hidden"))}),s.prepend(t)})}}(),function(){var e=document.querySelector(".js-answers__form");if(e){var t=e.querySelector(".js-count-answer"),n=document.querySelector(".js-answers__count"),o=document.querySelector(".js-answers__all-count");(t||n||o)&&(n.addEventListener("mouseover",function(){t.focus()}),t.onblur=function(){t.value<1?t.value=1:t.value>+o.textContent&&(t.value=+o.textContent),n.classList.remove("answers__count--hover")},t.onfocus=function(){n.classList.add("answers__count--hover")},t.oninput=function(){t.value=t.value.replace(/[^\+\d]/g,""),t.focus(),n.classList.add("answers__count--hover")},e.addEventListener("submit",function(e){e.preventDefault(),t.blur()}))}}(),function(){var e=document.querySelectorAll(".confirmation-popup[data-modal]");e.length&&e.forEach(function(t){function n(e){!function(e,t){e.keyCode===l&&t()}(e,a)}var e=t.getAttribute("data-modal"),o=t.querySelector(".confirmation-popup__body"),i=document.querySelectorAll('button[data-modal="'+e+'"]'),r=t.querySelector(".confirmation-popup__close-btn"),s=t.querySelector(".confirmation-popup__back-btn"),l=27,a=function(){t.classList.remove("confirmation-popup--show"),document.querySelector("body").style.overflow="visible",document.removeEventListener("keydown",n)};i.forEach(function(e){e.addEventListener("click",function(){t.classList.add("confirmation-popup--show"),document.querySelector("body").style.overflow="hidden",document.addEventListener("keydown",n)})}),r.addEventListener("click",a),s.addEventListener("click",a),t.addEventListener("click",a),o.addEventListener("click",function(e){return e.stopPropagation(),e.stopImmediatePropagation(),!1})})}(),window.var={keyCode:{ENTER:13,ESC:27},resolution:{DESKTOP:1200,TABLET:768,MOBILE:320}},function(){var e=document.querySelector(".js_cookie"),t=document.querySelector(".js-cookie__button");e&&t&&(document.body.classList.add("page-body--cookie"),t.addEventListener("click",function(){e.classList.add("js_hide"),document.body.classList.remove("page-body--cookie")}))}(),function(){var n,o,i,r,e=document.querySelectorAll(".js-collapse-button"),t=document.querySelectorAll(".js-collapse-content");if(t.length){var s=(n=function(){t.forEach(function(e){e.style.setProperty("--height",e.scrollHeight+"px")})},o=250,function(){var e=this,t=arguments;clearTimeout(r),r=setTimeout(function(){r=null,i||n.apply(e,t)},o),i&&!r&&n.apply(e,t)});s(),window.addEventListener("resize",function(){s()})}e.length&&e.forEach(function(e){function t(){"false"===n.getAttribute("data-collapsed")?(n.setAttribute("data-collapsed","true"),o.textContent="Контакты",e.classList.remove("collapsed")):(n.setAttribute("data-collapsed","false"),o.textContent="Свернуть",e.classList.add("collapsed"))}var n=e.parentElement.querySelector(".js-collapse-content"),o=e.querySelector("span");t(),e.addEventListener("click",t)})}();var _createClass=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){function l(e){var t="";for(var n in e)t+=n+'="'+e[n]+'" ';return t}function u(e){var t=e.id,n=e.items,o=e.multiple,i=e.name,r=e.required,s=e.activeIndex;return"<select "+(t?"id='"+t+"'":"")+" "+(i?"name='"+i+"'":"")+" "+(o?"multiple":"")+" "+(r?"required":"")+' tabindex="-1" aria-hidden="true">\n              <option value=""></option>\n              '+function(e,n){return e.map(function(e,t){return l(e.datasetBackend),n.length&&n.find(function(e){return e===t})===t?"<option "+(e.value?"value="+e.value:"")+" "+l(e.datasetBackend)+" selected>"+(e.text?""+e.text:"")+"</option>":"<option "+(e.value?"value="+e.value:"")+" "+l(e.datasetBackend)+">"+(e.text?""+e.text:"")+"</option>"}).join("\n")}(n,void 0===s?[]:s)+"\n            </select>"}var d=window.Scrollbar,t=(_createClass(e,[{key:"_createMultiString",value:function(e){return e.length?"Выбрано "+e.length:this._startText}},{key:"_setSelectActiveState",value:function(e,t,n){var o=n.querySelector(".custom-select__text"),i=n.querySelectorAll('.custom-select__item[aria-selected="true"]'),r=n.querySelector(".custom-select__label"),s=this._createMultiString(i);if(o.style.transition="0s",r&&(r.style.transition="0s"),setTimeout(function(){r&&(r.style.transition=null),o.style.transition=null},300),e&&t)n.classList.add("not-empty"),o.innerHTML=s;else{if(e)return;n.classList.add("not-empty"),o.innerHTML=i[0].innerHTML}}},{key:"_closeSelect",value:function(){var e=document.querySelector("[data-select].is-open");document.removeEventListener("click",this._onDocumentClick),document.removeEventListener("keydown",this._onEscapePress),e&&e.classList.remove("is-open")}},{key:"_onSelectElementClickAction",value:function(e,t){var n=e.closest(".custom-select"),o=n.dataset.multiple,i=n.dataset.insert,r=n.querySelector(".custom-select__text"),s=e.innerText,l=n.querySelectorAll("option"),a=n.querySelector("select"),c=new CustomEvent("change"),u=new CustomEvent("input");a.dispatchEvent(c),a.dispatchEvent(u);var d=a.closest("form");if(d){var p=new CustomEvent("change"),m=new CustomEvent("input");d.dispatchEvent(p),d.dispatchEvent(m)}if(o)if("true"===i)if("true"===e.getAttribute("aria-selected")){e.setAttribute("aria-selected","false");var v=n.querySelectorAll('.custom-select__item[aria-selected="true"]');n.querySelectorAll(".custom-select__item").forEach(function(e){return e.classList.remove("has-separator")});var g=n.querySelector('.custom-select__item:not([aria-selected="true"]):not(.is-hidden)');g&&v.length&&g.classList.add("has-separator");var f=this._createMultiString(v);l[t+1].selected=!1,(r.innerText=f)||(n.classList.remove("not-empty"),n.classList.remove("is-valid"))}else{e.setAttribute("aria-selected","true"),n.querySelectorAll(".custom-select__item").forEach(function(e){return e.classList.remove("has-separator")});var h=n.querySelector('.custom-select__item:not([aria-selected="true"]):not(.is-hidden)');h&&h.classList.add("has-separator");var y=n.querySelectorAll('.custom-select__item[aria-selected="true"]'),w=this._createMultiString(y);r.innerText=w,n.classList.add("not-empty"),n.classList.add("is-valid"),l[t+1].selected=!0}else"true"===e.getAttribute("aria-selected")?(e.setAttribute("aria-selected","false"),l[t+1].selected=!1):(e.setAttribute("aria-selected","true"),l[t+1].selected=!0);else{var S=n.querySelector('.custom-select__item[aria-selected="true"]');"true"===e.getAttribute("aria-selected")||(S&&(S.setAttribute("aria-selected","false"),n.classList.remove("not-empty"),n.classList.remove("is-valid")),r.innerText=s,e.setAttribute("aria-selected","true"),n.classList.add("not-empty"),n.classList.add("is-valid"),l[t+1].selected=!0),this._closeSelect()}}},{key:"_onDocumentClick",value:function(e){e.target.closest(".custom-select")||this._closeSelect()}},{key:"_onEscapePress",value:function(e){"Escape"===e.key&&this._closeSelect()}},{key:"_onSelectItemClick",value:function(e,t){this._onSelectElementClickAction(e,t)}},{key:"_onSelectItemKeydown",value:function(e,t,n){"Enter"===e.key&&this._onSelectElementClickAction(t,n)}},{key:"_onLastItemKeydown",value:function(e){"Tab"===e.key&&this._closeSelect()}},{key:"_onSelectClick",value:function(e){var t=e.target.closest("[data-select]"),n=document.querySelector("[data-select].is-open");t.classList.remove("is-invalid"),n&&n===t?n.classList.remove("is-open"):(n&&this._closeSelect(),document.addEventListener("click",this._onDocumentClick),document.addEventListener("keydown",this._onEscapePress),t.classList.contains("is-open")?t.classList.remove("is-open"):t.classList.add("is-open"))}},{key:"_onSelectKeydown",value:function(e){var t=e.target.closest("[data-select]");t.classList.remove("is-invalid"),e.shiftKey&&"Tab"===e.key&&t.closest(".is-open")&&this._closeSelect()}},{key:"_setActiveSelectItemsState",value:function(n,e){var o=this,i=!0;this._activeIndex=[],e.forEach(function(e,t){n?"true"===e.getAttribute("aria-selected")&&o._activeIndex.push(t):"true"===e.getAttribute("aria-selected")&&i?(o._activeIndex.push(t),i=!1):e.setAttribute("aria-selected","false")})}},{key:"_createSelectStructure",value:function(e){var t=e.querySelector("select");if(this._startText=e.querySelector(".custom-select__text").innerText,t)this._selectElement=null;else{var i={items:[]},n=e.dataset.multiple,o=e.dataset.id,r=e.dataset.name,s=e.dataset.required,l=e.dataset.insert,a=e.querySelector(".custom-select__list"),c=e.querySelectorAll(".custom-select__item");this._setActiveSelectItemsState(n,c),d.init(a,{continuousScrolling:!1}),this._activeIndex.length&&(i.activeIndex=this._activeIndex,this._setSelectActiveState(n,l,e)),i.name=r||!1,i.id=o||!1,i.required=Boolean(s),i.multiple=Boolean(n),c.forEach(function(e){var t={};e.attributes.forEach(function(e){e.name.startsWith("data")&&(t[e.name]=e.value)});var n=e.dataset.selectValue,o={};o.text=e.innerText,o.value=n,o.datasetBackend=t,i.items.push(o)}),function(e,t,n){switch(arguments.length<=2||void 0===n?"beforeend":n){case"prepend":e.prepend(t);break;case"afterend":e.after(t);break;case"beforeend":e.append(t)}}(e,function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}(u(i))),this._selectElement=e,this._activeIndex=null}}},{key:"_initSearch",value:function(s){var l=s.querySelector(".custom-select__search input");if(l){var a=s.querySelectorAll(".custom-select__item"),c=s.querySelector(".custom-select__search-clean");c.addEventListener("click",function(){l.value="";var e=new CustomEvent("input");l.dispatchEvent(e)}),l.addEventListener("input",function(e){e.target.value?c.classList.add("is-active"):c.classList.remove("is-active"),a.forEach(function(e){e.innerText.toLowerCase().includes(l.value.toLowerCase())?e.classList.remove("is-hidden"):e.classList.add("is-hidden")});var t=s.querySelectorAll(".custom-select__item:not(.is-hidden)"),n=s.querySelector(".custom-select__empty-box");n&&(t.length?n.classList.remove("is-active"):n.classList.add("is-active"));var o=s.querySelectorAll(".custom-select__item"),i=s.querySelectorAll('.custom-select__item[aria-selected="true"]:not(.is-hidden)');o.forEach(function(e){return e.classList.remove("has-separator")});var r=s.querySelector('.custom-select__item:not([aria-selected="true"]):not(.is-hidden)');r&&i.length&&r.classList.add("has-separator")})}}},{key:"_setSelectAction",value:function(){var o=this;if(this._selectElement){var e=this._selectElement.querySelector(".custom-select__button"),i=this._selectElement.querySelectorAll(".custom-select__item");e.addEventListener("click",this._onSelectClick),e.addEventListener("keydown",this._onSelectKeydown),i.forEach(function(t,n){t.addEventListener("click",function(){o._onSelectItemClick(t,n)}),t.addEventListener("keydown",function(e){o._onSelectItemKeydown(e,t,n)}),n===i.length-1&&t.addEventListener("keydown",o._onLastItemKeydown)})}}},{key:"init",value:function(){var t=this;this._selects=document.querySelectorAll("[data-select]"),this._selects.forEach(function(e){t._createSelectStructure(e),t._initSearch(e),t._setSelectAction()})}}]),e);function e(){_classCallCheck(this,e),this._selects=null,this._selectElement=null,this._activeIndex=null,this._startText=null,this._onDocumentClick=this._onDocumentClick.bind(this),this._onEscapePress=this._onEscapePress.bind(this),this._onSelectItemClick=this._onSelectItemClick.bind(this),this._onSelectItemKeydown=this._onSelectItemKeydown.bind(this),this._onLastItemKeydown=this._onLastItemKeydown.bind(this),this._onSelectClick=this._onSelectClick.bind(this),this._onSelectKeydown=this._onSelectKeydown.bind(this),window.selectInit=this.init.bind(this)}window.addEventListener("DOMContentLoaded",function(){window.addEventListener("load",function(){var e=new t;(window.customSelect=e).init()})}),console.log()}();var initFileUploader=function(){var o=document.querySelector(".js-upload-file-container");if(o){var e=o.querySelector(".js-user-files"),i=o.querySelector(".file-uploads__preview-container"),r=[],s=function(t,n){var e=document.createElement("button");e.setAttribute("type","button"),e.setAttribute("aria-label","удалить загруженные данные"),t.appendChild(e),e.addEventListener("click",function(){t.remove();var e=r.indexOf(n);-1<e&&r.splice(e,1)})},t=function(e){var t=document.createElement("div");t.classList.add("file-wrapper");var n=document.createElement("span");n.textContent=e.name,t.appendChild(n),s(t,e),i.appendChild(t),function(e){var t=o.querySelector(".js-user-files"),n=t.cloneNode(!0);n.removeAttribute("id"),e.appendChild(n),t.value&&(t.value="")}(t)};i.querySelectorAll(".file-wrapper").forEach(function(e){var t=e.querySelector("span");r.push(t),s(e,t)}),e.addEventListener("change",function(){e.files.length&&e.files.forEach(function(e){r.push(e),t(e)})})}};initFileUploader(),function(){function e(t){if(t){var e=t.querySelector(".js-filter__open-btn");t.classList.add("filter--js"),e.addEventListener("click",function(e){t.classList.toggle("filter--open"),e.currentTarget.textContent=t.classList.contains("filter--open")?"Скрыть фильтры":"Фильтры"})}}e(document.querySelector(".js-filter")),window.initJsFilter=e}(),function(){var e=document.querySelectorAll(".js-datepicker");e.length&&e.forEach(function(e){new window.Datepicker(e,{language:"ru",minDate:new Date,autohide:!0})})}(),function(){function t(e){var t=new window.SlimSelect({select:e,showSearch:!1,showContent:"down",placeholder:e.dataset.placeholderText?e.dataset.placeholderText:"",allowDeselect:!!e.dataset.deselect,deselectLabel:'<button type="button"><span class="visually-hidden">Сбросить фильтр по голосам</span><svg width="12" height="12" viewBox="0 0 12 12"><path d="M1 1L11 11M11 1L1 11" stroke-width="2"/></svg></button>',afterClose:function(){window.Scrollbar.destroy(n.querySelector(".ss-list"))},afterOpen:function(){window.Scrollbar.init(n.querySelector(".ss-list"),{continuousScrolling:!1})}}),n=t.slim.container,o=e.querySelectorAll("option[title]"),i=n.querySelectorAll(".ss-option[data-id]");return n.setAttribute("title",e.title),o.forEach(function(e,t){i[t].setAttribute("title",e.title)}),t}var e=document.querySelectorAll(".js-form-select select:not([multiple])");e.forEach(function(e){t(e)});var n,o=document.querySelector(".js-form-select-improvement select");o&&(n=o,new window.SlimSelect({select:n,showSearch:!1})),window.addSelect=t}();var resetSlider=function(e){var t=e.querySelector(".js-gallery-full"),n=e.querySelector(".js-gallery-full-frame"),o=e.querySelector(".js-full-gallery-link.active");e.swiper&&(e.swiper.destroy(),e.swiper=null),n&&(n.innerHTML=""),t&&t.classList.add("hidden"),o&&o.classList.remove("active")};window.galleryInSliderReset=resetSlider,document.addEventListener("click",function(e){var t=e.target.closest(".js-full-gallery-link"),n=e.target.closest(".js-gallery-full-close-btn"),o=e.target.closest(".js-gallery-full-wrap");t&&(e.preventDefault(),o.swiper?o.swiper.slideToLoop(+t.dataset.index):function(e){var n=e.closest(".js-gallery-full-wrap");if(n){var t=n.querySelectorAll(".gallery__tape .swiper-slide");n.querySelector(".js-gallery-full").classList.remove("hidden");var o=n.querySelector(".js-gallery-full-frame"),i=n.querySelector(".js-gallery-full-prev"),r=n.querySelector(".js-gallery-full-next"),s=document.createElement("div");s.classList.add("swiper-wrapper"),Array.prototype.forEach.call(t,function(e){var t=e.querySelector(".gallery__item").cloneNode(!0);t.querySelector(".gallery__item-img").src=e.querySelector(".gallery__item-link").href,t.classList.remove("gallery__item"),t.classList.add("swiper-slide"),t.classList.add("gallery-full__item"),s.appendChild(t)}),o.appendChild(s),n.swiper=new window.Swiper(o,{initialSlide:+e.dataset.index,slidesPerView:1,watchOverflow:!0,observer:!0,observerParent:!0,spaceBetween:16,grabCursor:!0,loop:!0,navigation:{prevEl:i,nextEl:r},on:{slideChange:function(){var e=n.querySelector(".js-full-gallery-link.active"),t=n.querySelector('.js-full-gallery-link[data-index="'+this.realIndex+'"]');e&&e.classList.remove("active"),t&&t.classList.add("active")}}});var l=n.querySelector(".js-single-image");l&&l.remove()}}(e.target)),n&&resetSlider(o)}),function(){var t=document.querySelector(".js-gallery-popup");if(t){var o=t.querySelector(".js-gallery-popup__frame"),r=t.querySelector(".js-gallery-popup__nav-btn--prev"),s=t.querySelector(".js-gallery-popup__nav-btn--next"),l=t.querySelector(".js-gallery-popup__photo-description"),a=t.querySelector(".js-gallery-popup__counter-current"),c=t.querySelector(".js-gallery-popup__counter-total"),u=t.querySelector(".popup__bar--bottom"),d=null;document.addEventListener("click",function(e){e.target.classList.contains("js-gallery__item-link")&&(e.preventDefault(),d&&(d.destroy(),o.innerHTML=""),window.openPopup(t),function(e){var t=e.parentElement.parentElement.children,n=e.querySelector(".gallery__item-text"),i=document.createElement("div");i.classList.add("swiper-wrapper"),Array.prototype.forEach.call(t,function(e){var t=e.querySelector(".gallery__item"),n=e.querySelector(".gallery__item-link").href,o=t.cloneNode(!0);o.querySelector("img").src=n,o.classList.add("swiper-slide"),i.appendChild(o)}),o.appendChild(i),d=new window.Swiper(o,{initialSlide:+e.dataset.index,slidesPerView:1,watchOverflow:!0,grabCursor:!0,loop:!0,navigation:{prevEl:r,nextEl:s},on:{slideChange:function(){l.textContent=t[this.realIndex].querySelector(".gallery__item-text").textContent,a.textContent=+this.realIndex+1}}}),l.textContent=n.textContent,a.textContent=+e.dataset.index+1,c.textContent=t.length,t.length<=1&&u.classList.add("d-none")}(e.target))})}}(),function(){var e=document.querySelectorAll(".js-gallery");if(e.length){var t=function(e){e.querySelectorAll(".js-gallery__item-link").forEach(function(e,t){e.dataset.index=t}),function(e){var t=new window.Swiper(e,{slidesPerView:"auto",spaceBetween:16,breakpoints:{320:{spaceBetween:12}},watchOverflow:!0,grabCursor:!0,observer:!0,observerParent:!0,observeSlideChildren:!0});e.swiper=t}(e),e.classList.add("is-inited")};e.forEach(function(e){t(e)}),window.initSlider=t}}(),function(){if(document.querySelector(".hearings-result__status-info")){var n=document.querySelector(".js-hearings-parent"),o=n.querySelector(".hearings-result__status-info"),i=document.querySelector("#poll-result");o.addEventListener("click",function(e){e.preventDefault(),o.remove();var t=i.content.firstElementChild.cloneNode(!0);n.append(t)})}}(),function(){var t=document.querySelector(".js-image-popup");if(t){var o=t.querySelector(".js-image-popup-frame");document.addEventListener("click",function(e){e.target.classList.contains("js-image-popup-link")&&(e.preventDefault(),window.openPopup(t),function(e){o.innerHTML="";var t=document.createElement("img"),n=e.querySelector("img");t.setAttribute("src",n.getAttribute("src")),o.appendChild(t)}(e.target))})}}(),function(){function t(e){var t=e.querySelector(".info-banner__text"),n=e.querySelector(".info-banner__button");if(t&&n&&!e.classList.contains("info-banner_enough-lines_true")&&!e.classList.contains("info-banner_enough-lines_false")){var o=n.querySelector(".info-banner-button__text"),i=function(){n.classList.contains("opened")?o.textContent="Свернуть":o.textContent="Развернуть"},r=t.getBoundingClientRect().height,s=+getComputedStyle(t).lineHeight.replace("px",""),l=Math.ceil(r/s);console.log(l);var a=3;e.querySelector(".info-banner__title")&&(a=2),a<l?(e.classList.add("info-banner_enough-lines_true"),n.addEventListener("click",function(e){e.currentTarget.classList.toggle("opened"),t.classList.toggle("opened"),i()})):(e.classList.add("info-banner_enough-lines_false"),i())}}var e=document.querySelectorAll(".info-banner");0<e.length&&e.forEach(function(e){t(e)}),window.initInfoBannerToggle=t}();var tooltipsInit=function(){if(document.querySelectorAll(".info-tooltip").length){var e=function(e){var t=e.target.closest(".info-tooltip");if(t){t.classList.add("shown");var n=t.querySelector(".info-tooltip__text"),o=n.getBoundingClientRect();if(o.left<=20)return n.style.left=-(t.getBoundingClientRect().left-20)+"px",void n.classList.add("info-tooltip__text--side-close");if(o.right>=document.documentElement.clientWidth-20)return n.style.right=-(document.documentElement.clientWidth-t.getBoundingClientRect().right-20)+"px",void n.classList.add("info-tooltip__text--side-close")}},t=function(e){var t=e.target.closest(".info-tooltip");if(t){t.classList.remove("shown");var n=t.querySelector(".info-tooltip__text");n.classList.remove("info-tooltip__text--side-close"),n.style=""}};document.addEventListener("mouseover",e),document.addEventListener("mouseout",t),document.addEventListener("focusin",e),document.addEventListener("focusout",t)}};tooltipsInit();var initChoices=function(){var n=window.Scrollbar,e=document.querySelectorAll("._select");0<e.length&&e.forEach(function(e){new window.Choices(e,{searchEnabled:!1,itemSelectText:"",shouldSort:!1,placeholder:!0,placeholderValue:"Выберите из списка"}),e.addEventListener("showDropdown",function(){n.init(e.parentElement.nextElementSibling.querySelector(".choices__list"),{continuousScrolling:!1})}),e.addEventListener("hideDropdown",function(){setTimeout(function(){n.destroy(e.parentElement.nextElementSibling.querySelector(".choices__list"),{continuousScrolling:!1})},500)})});var t=document.querySelectorAll("._select-search");0<t.length&&t.forEach(function(t){new Choices(t,{searchEnabled:!0,itemSelectText:"",shouldSort:!1,placeholder:!0,placeholderValue:"Выберите из списка",noResultsText:"Ни чего не найдено",searchPlaceholderValue:"Начните вводить текст"}),t.addEventListener("showDropdown",function(e){n.init(t.parentElement.nextElementSibling.querySelector(".choices__list"),{continuousScrolling:!1})}),t.addEventListener("hideDropdown",function(e){setTimeout(function(){n.destroy(t.parentElement.nextElementSibling.querySelector(".choices__list"),{continuousScrolling:!1})},500)})})};(window.initChoices=initChoices)(),function(){var e=document.querySelectorAll(".preview-input"),s=document.querySelector(".js-popup:not(.js-popup--gallery-full):not(.js-popup--gallery-single)");if(e.length&&s){e.forEach(function(e){var t=e.querySelector(".zoom-button"),n=e.querySelector(".preview-input__image-wrapper img"),o=e.querySelector(".preview-input__description"),i=s.querySelector(".gallery-popup__frame img"),r=s.querySelector(".gallery-popup__photo-description");t.addEventListener("click",function(){!function(e,t){var n=e.getAttribute("src");e.dataset.thumbnail&&(n=e.dataset.thumbnail),n?t.setAttribute("src",n):t.removeAttribute("src")}(n,i),function(e,t){if(e){var n=e.textContent;t.textContent=n}else t.textContent=""}(o,r),window.openPopup(s)})})}}(),function(){document.querySelector(".landscaping-form__section.map-section");var c=document.querySelector("#map-hidden"),u=document.querySelector("#map-search"),e=document.querySelector("#map"),d=document.querySelector("#user-coords"),p=document.querySelectorAll(".mapMenuIcon");document.querySelector(".mapMenu");if(e){var m=e.getAttribute("data-icon");ymaps.ready(function(){var r,n,t,e=new ymaps.SuggestView("map-search");if(d.value)ymaps.geocode(d.value,{}).then(function(e){var t=e.geoObjects.get(0).geometry.getCoordinates();r=new ymaps.Map("map",{center:t,zoom:15,controls:["zoomControl"]},{searchControlProvider:"yandex#search",suppressMapOpenBlock:!0}),n=new ymaps.GeoObject({geometry:{type:"Point",coordinates:t}},{iconLayout:"default#image",iconImageHref:m,iconImageSize:[36,54],draggable:!0}),c.value=t,r.geoObjects.add(n),r.geoObjects.events.add(["dragend"],function(e){var t=r.options.get("projection").fromGlobalPixels(r.converter.pageToGlobal(e.get("position")),r.getZoom());a(c.value=t),ymaps.geocode(t).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")})}),r.events.add("click",function(e){var t=e.get("coords");ymaps.geocode(t).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")}),l(t)})});else if(c.value){var o=c.value.split(",").map(function(e){return Number(e)});r=new ymaps.Map("map",{center:o,zoom:15,controls:["zoomControl"]},{searchControlProvider:"yandex#search",suppressMapOpenBlock:!0}),n=new ymaps.GeoObject({geometry:{type:"Point",coordinates:o}},{iconLayout:"default#image",iconImageHref:m,iconImageSize:[36,54],draggable:!0}),ymaps.geocode(o).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")}),r.geoObjects.add(n),r.geoObjects.events.add(["dragend"],function(e){var t=r.options.get("projection").fromGlobalPixels(r.converter.pageToGlobal(e.get("position")),r.getZoom());a(c.value=t),ymaps.geocode(t).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")})}),r.events.add("click",function(e){var t=e.get("coords");ymaps.geocode(t).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")}),l(t)})}else u.value?ymaps.geocode(u.value,{}).then(function(e){var t=e.geoObjects.get(0).geometry.getCoordinates();r=new ymaps.Map("map",{center:t,zoom:15,controls:["zoomControl"]},{searchControlProvider:"yandex#search",suppressMapOpenBlock:!0}),n=new ymaps.GeoObject({geometry:{type:"Point",coordinates:t}},{iconLayout:"default#image",iconImageHref:m,iconImageSize:[36,54],draggable:!0}),c.value=t,r.geoObjects.add(n),r.geoObjects.events.add(["dragend"],function(e){var t=r.options.get("projection").fromGlobalPixels(r.converter.pageToGlobal(e.get("position")),r.getZoom());a(c.value=t),ymaps.geocode(t).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")})}),r.events.add("click",function(e){var t=e.get("coords");ymaps.geocode(t).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")}),l(t)})}):r=new ymaps.Map("map",{center:[55.753994,37.622093],zoom:15,controls:["zoomControl"]},{searchControlProvider:"yandex#search",suppressMapOpenBlock:!0});function i(e){e.preventDefault(),p.forEach(function(e){e.classList.remove("active")}),this.classList.add("active"),this.classList.contains("mapPolygon")&&(function(){var o,i=new ymaps.Polygon([],{},{editorDrawingCursor:"crosshair",editorMaxPoints:5,strokeColor:"#0000FF",strokeWidth:5});r.geoObjects.add(i);var e=new ymaps.Monitor(i.editor.state);e.add("drawing",function(e){if((o=i.geometry.getCoordinates())[0]){o[0].forEach(function(e,t){var n=t+"coords";(n=document.createElement("input")).name="user-coords[]",n.type="hidden",n.value=e,document.querySelector(".coordsFigure").append(n)});var t=document.createElement("input");t.name="zoom",t.type="hidden",t.value=r.getZoom(),document.querySelector(".coordsFigure").append(t);var n=document.createElement("input");n.name="center",n.type="hidden",n.value=r.getCenter(),document.querySelector(".coordsFigure").append(n)}i.options.set("strokeColor",e?"#FF0000":"#0000FF")}),i.events.add("click",function(){console.log("polygon clicked")}),e.add("beforedrag",function(){console.log("polygon clicked")}),i.editor.startDrawing()}(),s()),this.classList.contains("mapLineBroken")&&(function(){var t=new ymaps.Polyline([],{},{strokeColor:"#00000088",strokeWidth:4,editorMaxPoints:6,editorMenuManager:function(e){return e.push({title:"Удалить линию",onClick:function(){r.geoObjects.remove(t)}}),e}});r.geoObjects.add(t),t.editor.startDrawing()}(),s()),this.classList.contains("mapLine")&&(function(){var t=new ymaps.Polyline([],{},{strokeColor:"#00000088",strokeWidth:2,editorMaxPoints:2,editorMenuManager:function(e){return e.push({title:"Удалить линию",onClick:function(){r.geoObjects.remove(t)}}),e}});r.geoObjects.add(t),t.editor.startDrawing()}(),s()),this.classList.contains("mapPin")&&(n=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[55.753994,37.622093]}},{iconLayout:"default#image",iconImageHref:m,iconImageSize:[36,54],draggable:!0}),r.geoObjects.add(n),r.geoObjects.events.add(["dragend"],function(e){var t=r.options.get("projection").fromGlobalPixels(r.converter.pageToGlobal(e.get("position")),r.getZoom());a(c.value=t),ymaps.geocode(t).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")})}),r.events.add("click",function(e){var t=e.get("coords");ymaps.geocode(t).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")}),l(t)}),s())}function s(){p.forEach(function(e){e.classList.contains("active")||e.classList.add("disabled")})}function l(e){c.value=e,n?n.geometry.setCoordinates(e):(n=function(e){return new ymaps.GeoObject({geometry:{type:"Point",coordinates:e}},{iconLayout:"default#image",iconImageHref:m,iconImageSize:[36,54],draggable:!0})}(e),r.geoObjects.add(n),n.events.add("dragend",function(){a(n.geometry.getCoordinates())})),a(e)}function a(e){ymaps.geocode(e).then(function(e){t=e.geoObjects.get(0),n.properties.set({iconCaption:[t.getLocalities().length?t.getLocalities():t.getAdministrativeAreas(),t.getThoroughfare()||t.getPremise()].filter(Boolean).join(", "),balloonContent:t.getAddressLine()})})}e.events.add("select",function(i){ymaps.geocode(i.get("item").value,{}).then(function(e){var t=e.geoObjects.get(0),n=t.geometry.getCoordinates(),o=t.properties.get("boundedBy");i.get("item").value,l(n),r.setBounds(o,{checkZoomRange:!0})})}),p.forEach(function(e){e.addEventListener("click",i)})})}}(),function(){var e=document.querySelectorAll(".js-like-counter"),n="js_likes_container";function o(e){var t=e.currentTarget;if(!t.parentElement.querySelector(".liked")){var n=t.querySelector("span"),o=parseInt(n.textContent,10);t.classList.contains("liked")?(t.classList.remove("liked"),o-=1):(t.classList.add("liked"),o++),n.textContent=o,i(t)}}function i(e){var t=e.parentElement;t.classList.contains(n)&&t.querySelector("button:not(.liked)")&&t.querySelectorAll("button").forEach(function(e){e.removeEventListener("click",o)})}e.length&&e.forEach(function(e){e.addEventListener("click",o)})}(),function(){var e=document.querySelector(".js-location-switcher");e&&e.classList.add("location-switcher--js")}(),function(){var e=document.querySelector(".js-page-header");if(e){var t=document.documentElement.clientWidth,n=e.querySelector(".js-page-header__bar"),o=e.querySelector(".js-main-menu"),i=o.querySelector(".container"),r=e.querySelector(".js-menu-btn"),s=r.querySelector(".menu-btn__text"),l=document.querySelectorAll(".js-open-popup"),a=function(){o.style.height=e.classList.contains("page-header--open-menu")&&document.documentElement.clientWidth<window.var.resolution.DESKTOP?window.innerHeight-n.offsetHeight+"px":""},c=function(){e.classList.remove("page-header--open-menu"),window.bodyScrollLock.enableBodyScroll(i),r.classList.remove("menu-btn--close"),s.textContent="Открыть основное меню",window.adjustPageContentTopPadding()};r.addEventListener("click",function(){e.classList.contains("page-header--open-menu")?c():(e.classList.add("page-header--open-menu"),window.bodyScrollLock.disableBodyScroll(i),r.classList.add("menu-btn--close"),s.textContent="Закрыть основное меню"),a()}),l.forEach(function(e){e.addEventListener("click",c)}),window.addEventListener("resize",function(){t!==document.documentElement.clientWidth&&(t=document.documentElement.clientWidth,c()),a()})}}(),function(){var c=$("#improvement-map");0<!c.length||ymaps.ready(function(){var o=new ymaps.Map(c[0],{center:[55.76,37.64],controls:[],zoom:15},{searchControlProvider:"yandex#search"}),e=(new ymaps.ObjectManager({clusterize:!0,gridSize:32,clusterDisableClickZoom:!0}),ymaps.templateLayoutFactory.createClass("<div class='map-buttons'><div id='zoom-in'></div><div id='zoom-out'></div></div>",{build:function(){e.superclass.build.call(this),this.zoomInCallback=ymaps.util.bind(this.zoomIn,this),this.zoomOutCallback=ymaps.util.bind(this.zoomOut,this),$("#zoom-in").bind("click",this.zoomInCallback),$("#zoom-out").bind("click",this.zoomOutCallback)},clear:function(){$("#zoom-in").unbind("click",this.zoomInCallback),$("#zoom-out").unbind("click",this.zoomOutCallback),e.superclass.clear.call(this)},zoomIn:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()+1,{checkZoomRange:!0})},zoomOut:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()-1,{checkZoomRange:!0})}})),t=new ymaps.control.ZoomControl({options:{layout:e}}),n=ymaps.templateLayoutFactory.createClass("<div><div id='user-location'></div>",{build:function(){n.superclass.build.call(this),this.getLocation=ymaps.util.bind(this.userLocation,this),$("#user-location").bind("click",this.getLocation)},clear:function(){$("#user-location").unbind("click",this.getLocation),n.superclass.clear.call(this)},userLocation:function(){ymaps.geolocation.get({provider:"browser",mapStateAutoApply:!0}).then(function(e){e.geoObjects.options.set("preset","islands#blueCircleIcon"),o.geoObjects.add(e.geoObjects)})}}),i=new ymaps.control.GeolocationControl({options:{layout:n}});400<=window.innerWidth&&(o.controls.add(t,{float:"none",position:{right:"8px",top:"244px"}}),o.controls.add(i,{float:"none",position:{right:"8px",top:"324px"}}));var r=[];r=window.innerWidth<400?[-5,32]:[43,-27];var s=new ymaps.Clusterer({clusterIconLayout:ymaps.templateLayoutFactory.createClass('<div class="cluster-icon"><span>{{ properties.geoObjects.length }}</span></div>'),clusterIconShape:{type:"Rectangle",coordinates:[[0,0],[49,49]]}});o.events.add("balloonopen",function(e){e.get("target").options.set({iconImageHref:"img/pin-hover.svg"})}),o.events.add("balloonclose",function(e){e.get("target").options.set({iconImageHref:"img/pin.svg"})});var l=ymaps.templateLayoutFactory.createClass('<div class="popover right"><button type="button" aria-label="Закрыть информацию" class="close"></button><div class="arrow"></div><div class="popover-inner">$[[options.contentLayout observeSize minWidth=300 maxWidth=300 maxHeight=500]]</div></div>',{build:function(){this.constructor.superclass.build.call(this),this._$element=$(".popover",this.getParentElement()),this.applyElementOffset(),this._$element.find(".close").on("click",$.proxy(this.onCloseClick,this))},clear:function(){this._$element.find(".close").off("click"),this.constructor.superclass.clear.call(this)},onSublayoutSizeChange:function(){l.superclass.onSublayoutSizeChange.apply(this,arguments),this._isElement(this._$element)&&(this.applyElementOffset(),this.events.fire("shapechange"))},applyElementOffset:function(){window.innerWidth<400?this._$element.css({top:0}):this._$element.css({top:-this._$element[0].offsetHeight/2})},onCloseClick:function(e){e.preventDefault(),this.events.fire("userclose")},getShape:function(){if(!this._isElement(this._$element))return l.superclass.getShape.call(this);var e=this._$element.position();return new ymaps.shape.Rectangle(new ymaps.geometry.pixel.Rectangle([[e.left,e.top],[e.left+this._$element[0].offsetWidth+200,e.top+this._$element[0].offsetHeight+this._$element.find(".arrow")[0].offsetHeight]]))},_isElement:function(e){return e&&e[0]&&e.find(".arrow")[0]}}),a=c.data("link");ymaps.geoXml.load(a).then(function(e){var t=e.geoObjects.toArray();0<t.length&&o.setCenter([t[0].geometry._coordinates[0],t[0].geometry._coordinates[1]]);for(var n=0;n<t.length;n++)t[n].geometry._coordPath?o.geoObjects.add(t[n]):(t[n].options.set({balloonLayout:l,iconLayout:"default#image",iconImageHref:"img/pin.svg",iconImageSize:[28,40],hideIconOnBalloonOpen:!1,balloonPanelMaxMapArea:0,balloonOffset:r}),s.add(t[n]));o.geoObjects.add(s),e.mapState?e.mapState.applyToMap(o):o.setBounds(e.geoObjects.getBounds())})})}(),function(){var n,o,i,r=document.querySelector('[data-modal="projects-period"]'),s="modal--active",t=!1,l=350;function a(e){var t=e.target;(t!==r&&!t.closest(".modal--"+r.dataset.modal+" .modal__content")&&n.classList.contains(s)||t.closest(".modal__close-btn"))&&(n.classList.remove(s),i.style.overflow="",document.removeEventListener("click",a),o.removeEventListener("click",a))}r&&r.addEventListener("click",function(e){e.preventDefault(),n=document.querySelector(".modal--"+r.dataset.modal),o=n.querySelector(".modal__close-btn"),i=document.querySelector("body"),n.classList.add(s),i.style.overflow="hidden",t||function(e){e.forEach(function(e){var t=e.textContent;t.length>l&&(e.textContent=t.slice(0,l)+"...")})}(n.querySelectorAll(".modal__content-text")),t=!0,document.addEventListener("click",a),o.addEventListener("click",a)})}(),function(){var e=document.querySelector(".js-moderator-comments");if(e){var t=e.parentElement,n=window.debounce(function(){t.style.height="auto",t.style.height=t.scrollHeight+"px"},150);e.addEventListener("click",function(){t.classList.contains("comments-tab--opened")?(t.classList.remove("comments-tab--opened"),t.removeAttribute("style"),window.removeEventListener("resize",n)):(t.classList.add("comments-tab--opened"),function(){var e=t.scrollHeight;t.style.height=e+"px"}(),window.addEventListener("resize",n))})}}(),function(){function t(e){var t,n,o=new window.SlimSelect({select:e,showSearch:!1,showContent:"down",allowDeselectOption:!0,closeOnSelect:!1,placeholder:e.dataset.placeholderText?e.dataset.placeholderText:"",allowDeselect:!!e.dataset.deselect,afterOpen:function(){window.Scrollbar.init(s.querySelector(".ss-content"),{continuousScrolling:!1})},beforeOpen:function(){var e=o.slim.container,t=o.slim.content.querySelectorAll(".ss-option:not(.ss-hide)").length;e.classList.remove("two-column","three-column"),8<t&&t<=15&&e.classList.add("two-column"),14<t&&t<=21&&e.classList.add("three-column"),21<t&&(e.classList.add("three-column"),e.classList.add("fixed-height")),r()},afterClose:function(){window.Scrollbar.destroy(s.querySelector(".ss-content")),l(),o.select.element.closest("form").submit()},onChange:function(){i()}}),s=o.slim.container,i=function(){a(),c()},r=function(){var e=s.querySelector(".ss-content"),t=e.getBoundingClientRect().x,n=e.getBoundingClientRect().width,o=window.innerWidth,i=getComputedStyle(s).getPropertyValue("--colNum"),r=o-(t+n);16<=r||(!r-312?s.setAttribute("style","--colNum:"+(i-1)):!r-624&&s.setAttribute("style","--colNum:"+(i-2)))},l=function(){s.removeAttribute("style")},a=function(){o.selected().length?s.querySelector(".ss-add").classList.remove("ss-empty"):s.querySelector(".ss-add").classList.add("ss-empty")},c=function(){o.selected().length?s.querySelector(".ss-plus").textContent="Категорий выбрано: "+o.selected().length:s.querySelector(".ss-plus").textContent=e.dataset.placeholderText};return s.querySelector(".ss-add").classList.add("ss-empty"),s.querySelector(".ss-add").prepend(((t=document.createElement("button")).classList.add("ss-deselect-all"),t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),o.set([])}),t)),s.querySelector(".ss-add").appendChild(((n=document.createElement("div")).innerHTML='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.9833 12L8 7.02703L3.01667 12L1.5 10.4865L8 4L14.5 10.4865L12.9833 12Z" fill="#2C8ECC"/></svg>',n.children[0])),s.querySelector(".ss-plus").textContent=e.dataset.placeholderText,i(),o}var e=document.querySelectorAll(".js-multiple-select");e.forEach(function(e){t(e)}),window.addMultipleSelect=t}(),function(){var e=document.querySelector(".js-page-header");if(e){var t=e.querySelector(".js-page-header__bar"),n=function(){document.documentElement.clientWidth>=window.var.resolution.DESKTOP&&0<window.pageYOffset?(e.classList.add("page-header--above-content"),e.style.top=-t.offsetHeight+"px"):(e.classList.remove("page-header--above-content"),e.style.top=0)},o=function(){document.body.style.paddingTop=e.offsetHeight+"px"};e.classList.add("page-header--js"),o(),n(),document.addEventListener("scroll",n),window.addEventListener("resize",function(){e.classList.remove("page-header--above-content"),o(),n()}),window.adjustPageContentTopPadding=o}}(),function(){function t(e){var t=new window.Swiper(e,{slidesPerView:"auto",spaceBetween:16,breakpoints:{320:{spaceBetween:12}},watchOverflow:!0,grabCursor:!0,observer:!0,observerParent:!0,observeSlideChildren:!0});return e.swiper=t}var n=document.querySelector(".js-projects-popup"),e=document.querySelectorAll(".js-projects__item-link");window.initSliderInPopup=t,e&&e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),window.openPopup(n),n.classList.contains("js-sliders-inited")||function(e){e.querySelectorAll(".js-gallery-in-popup").forEach(function(e){t(e)})}(n),n.classList.add("js-sliders-inited")})}),window.openPopup=function(e){window.bodyScrollLock.disableBodyScroll(e),e.classList.add("popup--shown")};function o(e){window.bodyScrollLock.enableBodyScroll(e),e.classList.remove("popup--shown")}if(n){var i=n.querySelector(".js-popup__overlay"),r=n.querySelector(".js-popup__close-btn");i&&i.addEventListener("click",function(){o(n)}),r&&r.addEventListener("click",function(){o(n)}),document.addEventListener("keydown",function(e){!function(e,t){e.keyCode===window.var.keyCode.ESC&&t.classList.contains("popup--shown")&&(e.preventDefault(),o(t))}(e,n)})}}(),function(){var e=document.querySelectorAll(".js-popup");window.openPopup=function(e){window.bodyScrollLock.disableBodyScroll(e,{reserveScrollBarGap:!0}),e.classList.add("popup--shown")};function o(e){window.bodyScrollLock.enableBodyScroll(e),e.classList.remove("popup--shown")}e.forEach(function(t){var e=t.querySelector(".js-popup__overlay"),n=t.querySelector(".js-popup__close-btn");e.addEventListener("click",function(){o(t)}),n.addEventListener("click",function(){o(t)}),document.addEventListener("keydown",function(e){!function(e,t){e.keyCode===window.var.keyCode.ESC&&t.classList.contains("popup--shown")&&(e.preventDefault(),o(t))}(e,t)})})}(),function(){var r,e=document.querySelector("#map-progects"),s=document.querySelector("#mapProgectsCenter");if(e){e.getAttribute("data-icon");ymaps.ready(function(){s.value?ymaps.geocode(s.value,{}).then(function(e){var t=e.geoObjects.get(0),n=t.geometry.getCoordinates(),o=t.properties.get("boundedBy"),i=(e.geoObjects.get(0).getLocalities().toString().trim(),e.geoObjects.get(0).getAdministrativeAreas()[0].toString().trim());i!==s.value&&""!==i?ymaps.geocode(i,{}).then(function(e){r=new ymaps.Map("map-progects",{center:n,zoom:12,controls:["zoomControl"]},{searchControlProvider:"yandex#search",suppressMapOpenBlock:!0,restrictMapArea:e.geoObjects.get(0).properties.get("boundedBy")}),l()}):(r=new ymaps.Map("map-progects",{center:n,zoom:12,controls:["zoomControl"]},{searchControlProvider:"yandex#search",suppressMapOpenBlock:!0,restrictMapArea:o}),l())}):(r=new ymaps.Map("map-progects",{center:[55.76,37.64],zoom:12,controls:["zoomControl"]},{searchControlProvider:"yandex#search"}),l())})}function l(){var t=new ymaps.ObjectManager({clusterize:!0,gridSize:32,clusterDisableClickZoom:!0});r.geoObjects.add(t),$.ajax({url:"json/data.json"}).done(function(e){t.add(e)})}}();var openAkordeon=function(e){var t=e.closest(".proposal__project"),n=t.querySelector(".proposal__project-text"),o=t.querySelector(".proposal__gallery"),i=t.querySelector(".proposal__project-mark"),r=t.querySelector(".button--update"),s=t.querySelector(".js-gallery"),l=t.querySelector(".js-gallery-in-popup"),a=t.querySelector(".js-single-image");e.classList.toggle("opened"),n.classList.toggle("opened"),o&&o.classList.toggle("opened"),i&&i.classList.toggle("opened"),r&&r.classList.toggle("opened");var c=e.querySelector(".button-details__text");e.classList.contains("opened")?c.textContent="Свернуть":c.textContent="Подробнее",s&&!s.swiper&&window.initSlider(s),l&&!l.swiper&&window.initSliderInPopup(l),a&&!e.classList.contains("opened")&&a.remove()},onOpenAkordeon=function(e){var t=e.target.closest(".button-details");t&&openAkordeon(t)},initProjectAccordion=function(){var e=document.querySelectorAll(".proposal__project");0<e.length&&e.forEach(function(e){if(!e.classList.contains("is-inited")){var t=e.querySelector(".proposal__project-text"),n=e.querySelector(".button-details");if(t&&n){var o=n.querySelector(".button-details__text"),i=t.getBoundingClientRect().height,r=+getComputedStyle(t).lineHeight.replace("px",""),s=Math.ceil(i/r),l=3;e.querySelector(".proposal__project-title")&&(l=2),l<s?e.classList.add("project_enough-lines_true"):(e.classList.add("project_enough-lines_false"),n.classList.contains("opened")?o.textContent="Свернуть":o.textContent="Подробнее"),e.classList.add("is-inited")}}}),document.addEventListener("click",onOpenAkordeon)};initProjectAccordion(),window.initProjectAccordion=initProjectAccordion,window.openAkordeon=openAkordeon,function(){var e=document.querySelector(".js-project-page__panel");if(e){e.classList.add("project-page__panel--js");var t,n,o,i,r;t=document.querySelector(".container--desktop-only"),n=t.getBoundingClientRect().height,o=e.getBoundingClientRect().height,i=t.querySelector(".info-banner"),r=0,i&&(r=i.getBoundingClientRect().height),n&&o&&(t.style.minHeight=o+50+r+"px"),new window.Sticky(".js-project-page__panel")}}(),function(){var e,n;function t(){e.forEach(function(e){e.classList.remove("proposal__tab--active")}),this.classList.add("proposal__tab--active"),function(t){n.forEach(function(e){e.classList.value.includes(t)?e.classList.add("proposal__tab-item--active"):e.classList.remove("proposal__tab-item--active")})}(this.getAttribute("data-tab-name"))}e=document.querySelectorAll(".proposal__tab"),n=document.querySelectorAll(".proposal__tab-item"),e.forEach(function(e){e.addEventListener("click",t)})}(),function(){var e=document.querySelectorAll(".js-project-page__text");if(e.length){var t=document.documentElement.clientWidth,n=!1,o=function(e){e.target.classList.contains("js-project-page__text-btn")&&function(e){var t=e.parentElement,n=t.querySelector(".project-page__text-container"),o=e.querySelector(".project-page__text-btn-caption");t.classList.toggle("project-page__text--collapsed"),t.classList.contains("project-page__text--collapsed")?(n.style.height="190px",o.textContent="Показать полностью"):(n.style.height=n.scrollHeight+"px",o.textContent="Скрыть")}(e.target)},i=function(){Array.prototype.forEach.call(e,function(e){var t=e.querySelector(".project-page__text-container");190<t.scrollHeight&&(e.classList.add("project-page__text--collapsed","project-page__text--js"),t.style.height="190px")}),document.addEventListener("click",o),n=!0};t<window.var.resolution.TABLET&&i(),window.addEventListener("resize",function(){if(t!==document.documentElement.clientWidth)if((t=document.documentElement.clientWidth)<window.var.resolution.TABLET){if(n)return;i()}else Array.prototype.forEach.call(e,function(e){var t=e.querySelector(".project-page__text-container"),n=e.querySelector(".project-page__text-btn-caption");e.classList.remove("project-page__text--collapsed","project-page__text--js"),t.style.height="",n.textContent="Показать полностью"}),document.removeEventListener("click",o),n=!1})}}(),function(){var t=document.querySelector(".js-project-vote"),n=document.querySelector(".js-vote-popup");if(t&&n){var o=t.querySelector(".js-project-vote__submit-form form"),e=t.querySelector(".js-project-vote__revoke-btn"),i=n.querySelector(".js-vote-popup__revoke-btn"),r=null,s=+t.querySelector(".js-vote-results__value--approve").textContent.replace(/\s+/g,""),l=+t.querySelector(".js-vote-results__value--reject").textContent.replace(/\s+/g,""),a=t.querySelector(".js-vote-results__indicator"),c=function(e){e.preventDefault(),t.classList.remove("project-vote--voted"),o.querySelector(".project-vote__vote-btn--selected").classList.remove("project-vote__vote-btn--selected"),o.reset(),n.classList.remove("vote-popup--shown"),clearTimeout(r)};t.classList.add("project-vote--js"),a.style.width=Math.trunc(s/(s+l)*100)+"%",o.addEventListener("click",function(e){!e.target.classList.contains("project-vote__vote-btn")||e.target.classList.contains("project-vote__vote-btn--selected")||e.target.classList.contains("project-vote__vote-btn--disabled")||(t.classList.add("project-vote--voted"),e.target.classList.add("project-vote__vote-btn--selected"),t.querySelector("input").dispatchEvent(new Event("change")),n.classList.add("vote-popup--shown"),r=setTimeout(function(){n.classList.remove("vote-popup--shown")},5e3))}),e.addEventListener("click",c),i.addEventListener("click",c)}}(),function(){var e=document.querySelector(".js-projects-list");if(e){var t=new window.Ellipsis({lines:3}),n=e.querySelectorAll(".project-item__title");t.add(n)}}(),function(){if(document.querySelector(".proposal-winners__show-map-btn")){var e=document.querySelector(".proposal-winners__show-map-btn"),t=document.querySelector(".proposal-winners__map"),n=document.querySelector(".proposal-winners__close-map-btn");e.addEventListener("click",function(){t.classList.add("proposal-winners__map--show")}),n.addEventListener("click",function(){t.classList.remove("proposal-winners__map--show")})}}();var toggleActiveClass=function(e){e.forEach(function(e){var t=e.querySelector('input[type="radio"]');t&&e.classList.toggle("proposal__project--active",t.checked)})},initProposalProjects=function(){var i=document.querySelectorAll(".proposal__project");if(i.length){toggleActiveClass(i);var e=document.querySelector(".proposal form");e&&!e.classList.contains("is-inited")&&(e.addEventListener("change",function(e){toggleActiveClass(e.currentTarget.querySelectorAll(".proposal__project"));for(var t=e.target.closest(".proposal__project").querySelector(".button-details"),n=0;n<i.length;n++){var o=i[n].querySelector(".button-details");o.classList.contains("opened")&&window.openAkordeon(o)}window.openAkordeon(t)}),e.classList.add("is-inited"))}};initProposalProjects(),window.initProposalProjects=initProposalProjects;var initImgUpload=function(){function r(e,t,n){t.classList.add("image-loaded");var o=function(){var e=document.createElement("button");return e.setAttribute("type","button"),e.setAttribute("aria-label","удалить загруженное изображение"),e}();!function(e,t,n){e.addEventListener("click",function(){t.remove(),s(n)||l(n)||a(n)},{once:!0})}(o,t,e),t.appendChild(o),n&&t.append(n)}function s(e){return!!e.querySelector(".image-uploads__image-wrapper:not(.image-loaded)")}function l(e){return 5<=e.querySelectorAll(".image-uploads__image-wrapper").length}function a(e,t){var n=function(){var e=document.createElement("div");return e.classList.add("image-uploads__image-wrapper"),e}(),o=function(e){var t=document.createElement("input");return t.classList.add("visually-hidden"),t.setAttribute("type","file"),t.setAttribute("name",e),t.setAttribute("accept","image/png, image/jpeg, image/jpg, image/gif"),t.setAttribute("accept","image/png, image/jpeg, image/jpg, image/gif"),t.setAttribute("aria-label","user-images"),t}(t);c(o,n,t);var i=function(){var e=document.createElement("span");return e.innerHTML="Загрузить изображение",e}();n.append(o,i),e.append(n)}function c(e,o,i){e.addEventListener("change",function(e){var t=e.target.files[0],n=new FileReader;n.addEventListener("load",function(){var e=function(e){var t=document.createElement("img");return t.setAttribute("src",e),t}(n.result);r(u,o,e),s(u)||l(u)||a(u,i)}),n.readAsDataURL(t)})}var t,e,u=document.querySelector(".js-upload-image-container");if(u){var n=document.querySelectorAll(".image-uploads__image-wrapper"),o=" ";if(0<n.length)for(var i=0;i<n.length;i++){var d=n[i].querySelector('input[type="file"]');if(d){var p=d.getAttribute("name");if(p){o=p;break}}}t=u,0<(e=document.querySelectorAll('.image-uploads__image-wrapper input[type="file"]')).length&&e.forEach(function(e){l(t)&&e.parentNode.remove()}),n.forEach(function(e){e.querySelector("img")?r(u,e):c(e.querySelector('input[type="file"]'),e,o)})}};function initRangeSlider(s){if(s){var l=document.getElementById(s.dataset.input);if(l){var e=parseInt(s.dataset.min,10),t=parseInt(s.dataset.max,10),n=l.value?l.value:t/2;l.dataset.required,l.parentNode.querySelector(".error-field");window.noUiSlider.create(s,{start:n,behaviour:"snap",connect:"lower",step:parseInt(s.dataset.step,10),range:{min:[e],max:[t]},pips:{mode:"steps",stepped:!0,density:4},tooltips:!0,format:window.wNumb({decimals:0})}),s.noUiSlider.on("start",function(e,t){s.classList.remove("slide-disabled")}),s.noUiSlider.on("change",function(e,t){var n=e[t],o=Math.max(e),i=s.querySelectorAll(".noUi-marker-horizontal.noUi-marker-sub");if(l.value=n,l.dispatchEvent(new Event("change")),i)for(var r=0;r<i.length;r++)r<=o-2?i[r].classList.add("form-range__accent"):i[r].classList.remove("form-range__accent")}),s.addEventListener("click",function(e){s.removeAttribute("disabled"),l.removeAttribute("disabled")})}}}initImgUpload(),document.querySelectorAll(".js-poll-range").forEach(function(e){initRangeSlider(e)}),function(){var e=document.querySelectorAll(".js-ajax-wrapper"),t=new MutationObserver(function(e){Object.values(e).forEach(function(e){if("attributes"===e.type){var t=document.querySelectorAll(".info-banner");0<t.length&&t.forEach(function(e){window.initInfoBannerToggle(e)});var n=document.querySelectorAll(".js-ajax-wrapper select:not([multiple])");0<n.length&&n.forEach(function(e){e.getAttribute("data-ssid")||window.addSelect(e)});var o=document.querySelectorAll(".js-ajax-wrapper select[multiple]");0<o.length&&o.forEach(function(e){e.getAttribute("data-ssid")||window.addMultipleSelect(e)})}})});0<e.length&&e.forEach(function(e){t.observe(e,{attributes:!0,childList:!0,subtree:!0})})}(),function(){var n="js_hide",e=document.querySelector(".js_short_list"),t=document.querySelector(".js_short_list-category"),o=document.querySelector(".js_short_list + .js_show_all"),i=!1;if(e&&o||t&&o){var r=e.querySelectorAll("li")||t.querySelectorAll("li"),s=function(){r.forEach(function(e,t){4<t&&window.innerWidth<768?e.classList.add(n):7<t&&window.innerWidth<1024&&768<=window.innerWidth&&e.classList.add(n)}),t&&8<r.length&&(o.style.display="block",r.forEach(function(e,t){i=8<t?(e.classList.add(n),!0):(e.classList.remove(n),!1)})),i=!0};s(),o.addEventListener("click",function(){o.style.display="",i?(r.forEach(function(e){e.classList.remove(n)}),i=!1,o.classList.add("is-shown")):(s(),o.classList.remove("is-shown"))})}}(),function(){var e=document.querySelectorAll('[data-id="other-checkbox"]'),t=document.querySelectorAll('[data-id="other-radio"]'),n="hide";if(e&&e.forEach(function(e){e.addEventListener("change",function(e){var t=e.target.parentElement.querySelector(".js-other-textarea");e.target.checked?t.classList.remove(n):t.classList.add(n)})}),t){var o=null,i=function(e){var t=e.parentElement.querySelector(".js-other-textarea");t&&(e===o?t.classList.remove(n):t.classList.add(n))};t.forEach(function(e){var t=e.getAttribute("name"),n=document.querySelectorAll('[name="'+t+'"]');n.forEach(function(e){e.addEventListener("change",function(){i(o=e),function(e){e.forEach(function(e){i(e)})}(n)})})})}}(),document.addEventListener("click",function(e){e.target.classList.contains("js-single-image-link")&&(e.preventDefault(),function(e){var t=e.closest(".js-gallery-full-wrap");if(!t.querySelector(".js-single-image")){var n=t.querySelector(".js-gallery-full"),o='<button class="gallery-full__btn gallery-full__btn--close js-single-photo-close-btn" type="button"><span class="visually-hidden">Закрыть</span><svg width="16" height="16"><use xlink:href="img/sprite.svg#icon-close"></use></svg></button><div class="gallery-full__image js-single-photo-frame"><img src="'+e.querySelector("img").getAttribute("src")+'"></div>',i=document.createElement("div");i.classList.add("project__gallery-full","gallery-full","opened","js-single-image"),i.innerHTML=o;var r=t.querySelector(".button-details");r.classList.contains("opened")||window.openAkordeon(r),n&&(window.galleryInSliderReset(t),n.after(i))}}(e.target)),e.target.closest(".js-single-photo-close-btn")&&e.target.closest(".js-single-photo-close-btn").closest(".js-single-image").remove()}),function(){var t="js-hide",n=document.querySelector(".special-popup"),e=document.querySelectorAll(".js-open-popup");if(n&&e){var o=document.documentElement,i={"font-size":!0,"font-family":!0,theme:!0},r=n.querySelector(".js-close-popup"),s=n.querySelectorAll("[data-property]"),l=n.querySelector(".js-special-popup__reset");s.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t="[data-property="+e.target.getAttribute("data-property")+"]";n.querySelectorAll(t).forEach(function(e){e.classList.remove("active")}),e.target.classList.add("active"),function(e){var t=e.dataset.property,n=e.dataset.value;o.classList.forEach(function(e){new RegExp(t).test(e)&&o.classList.remove(e)}),"default"!==n?(i[t]=!1,o.classList.add("mod-"+t+"-"+n)):i[t]=!0,"font-size"===t&&window.adjustPageContentTopPadding(),l.disabled=i["font-size"]&&i["font-family"]&&i.theme}(e.currentTarget)})}),l.addEventListener("click",function(){o.className.split(" ").forEach(function(e){-1!==e.indexOf("mod-")&&o.classList.remove(e)}),s.forEach(function(e){e.classList.toggle("active","default"===e.dataset.value)}),l.disabled=!0}),e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),n.classList.remove(t),o.clientWidth<window.var.resolution.DESKTOP&&window.bodyScrollLock.disableBodyScroll(n)})}),r.addEventListener("click",function(){n.classList.add(t),o.clientWidth<window.var.resolution.DESKTOP&&window.bodyScrollLock.enableBodyScroll(n)}),window.addEventListener("keydown",function(e){e.keyCode===window.var.keyCode.ESC&&(e.preventDefault(),n.classList.add(t),o.clientWidth<window.var.resolution.DESKTOP&&window.bodyScrollLock.enableBodyScroll(n))})}}(),function(){var t=document.querySelector(".js-social__link--subscribe, .js-social__link--unsubscribe");if(t){var n=t.querySelector(".social__link-text");t.addEventListener("click",function(e){e.preventDefault(),t.classList.contains("social__link--subscribe")?(n.textContent="Отписаться",t.classList.remove("social__link--subscribe"),t.classList.add("social__link--unsubscribe")):(n.textContent="Подписаться",t.classList.add("social__link--subscribe"),t.classList.remove("social__link--unsubscribe"))})}}(),window.initTable=function(){!function(e){e.length&&Array.prototype.forEach.call(e,function(e){var t="min-width: "+e.scrollWidth+"px;";e.style=t})}(document.querySelectorAll(".table-fixed table")),function(e){e.length&&Array.prototype.forEach.call(e,function(e){return new window.SimpleBar(e,{autoHide:!1})})}(document.querySelectorAll(".table-fixed")),function(e){e.length&&Array.prototype.forEach.call(e,function(e){return new window.SimpleBar(e,{autoHide:!1})})}(document.querySelectorAll(".table-fixed tbody"))},window.initTable(),function(){var o,i;o=document.querySelector(".table-fixed--all-screen table tbody .simplebar-content-wrapper"),i=document.querySelector(".table-popup__header"),(o||i)&&o.addEventListener("scroll",function(){var e=document.querySelector(".table-fixed--all-screen table tr:first-child");if(e){var t=e.scrollHeight+16;if(50<o.scrollTop){i.classList.add("table-popup__header--scroll");var n="top: "+t+"px;";i.style=n}o.scrollTop<50&&i.classList.remove("table-popup__header--scroll")}})}(),function(){var e=document.documentElement.clientWidth,t=document.querySelector(".activity-tabs__list");if(t){var n=t.querySelector(".activity-tabs__item--active");if(n){var o=n.offsetLeft;e<window.var.resolution.TABLET&&(t.scrollLeft=o-16)}}}(),function(){var e=document.querySelectorAll(".js-fit-text");if(e.length){var t=function(){e.forEach(function(e){e.style.fontSize="";for(var t=function(e){return parseInt(getComputedStyle(e).fontSize,10)}(e),n=function(e){return parseInt(getComputedStyle(e).lineHeight,10)}(e);2<=e.offsetHeight/n;)t--,e.style.fontSize=t+"px"})};t(),window.addEventListener("resize",function(){setTimeout(t,50)})}}(),function(){window.openText=function(e){Array.prototype.forEach.call(e,function(e){var t=e.querySelector(".js-text-hidden__btn"),n=t.querySelector("span"),o=e.querySelector(".text-hidden__container"),i=e.querySelector(".text-hidden__btn-wrapper");(t||o||i)&&(54<o.scrollHeight?(o.classList.add("text-hidden__container--close"),t.addEventListener("click",function(e){e.preventDefault(),t.classList.toggle("text-hidden__btn--open"),o.classList.toggle("text-hidden__container--close"),i.classList.toggle("text-hidden__btn-wrapper--open"),n.textContent="Развернуть"===n.textContent?"Свернуть":"Развернуть"})):i.classList.add("text-hidden__btn-wrapper--hidden"))})};var e=document.querySelectorAll(".answers__discussion-col.js-text-hidden");e.length&&window.openText(e)}(),function(){var o=document.querySelector(".js-page-body__up-btn"),e=document.querySelector("footer .container");if(o){var i=document.querySelector(".js-cookie__button");if(e){var t=function(){e.getBoundingClientRect().right+o.offsetWidth<document.documentElement.clientWidth?(o.style.left=e.getBoundingClientRect().right-parseInt(getComputedStyle(e).paddingRight,10)+16+"px",o.style.right=""):(o.style.left="",o.style.right="16px"),i&&(o.style.bottom=window.innerHeight-i.getBoundingClientRect().bottom+(i.getBoundingClientRect().height-o.getBoundingClientRect().height)/2+1+"px")};t(),window.addEventListener("resize",function(){t()})}o.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),document.addEventListener("click",function(e){if((e.target.classList.contains("js-special-popup__btn-size")||e.target.classList.contains("js-special-popup__reset"))&&i){var t=i.offsetHeight,n=window.innerHeight-i.getBoundingClientRect().bottom;o.style.height=t+"px",o.style.width=t+"px",o.style.bottom=n+"px"}})}}(),function(){var e=document.querySelector(".js-user-menu");if(e){var t=e.querySelector(".js-user-menu__dropdown-btn"),n=t.querySelector(".user-menu__dropdown-btn-text"),o=e.querySelector(".js-user-menu__overlay"),i=e.querySelector(".js-user-menu__list"),r=function(){e.classList.remove("user-menu--open"),o.classList.remove("user-menu__overlay--shown"),n.textContent="Открыть меню пользователя"};t.addEventListener("click",function(){e.classList.contains("user-menu--open")?(r(),i.style.height=""):(e.classList.add("user-menu--open"),o.classList.add("user-menu__overlay--shown"),n.textContent="Закрыть меню пользователя",i.style.height=i.scrollHeight+"px")}),o.addEventListener("click",r),document.addEventListener("keydown",function(e){e.keyCode===window.var.keyCode.ESC&&o.classList.contains("user-menu__overlay--shown")&&(e.preventDefault(),r())})}}(),function(){var e=document.getElementById("widget_count_page"),t=document.getElementById("widget_count_all"),n=document.getElementById("widget_timer"),o=document.getElementById("widget_width_input"),i=document.querySelector(".widget_block__preview__block"),r=5,s=15,l=2e3,a=Math.ceil(s/r+1);if(e||t||n||i){var c=null,u=1,d=function(){$(".swiper-pagination").pagination({items:s,itemsOnPage:r,displayedPages:3,edges:1,cssStyle:"",currentPage:1,prevText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-prev"></use></svg>',nextText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-next"></use></svg>',onPageClick:function(e,t){c.slideTo(e-1,400,!1)}})},p=(c=new Swiper(".swiper-container",{speed:400,autoplay:{delay:l},watchOverflow:!0,grabCursor:!0,loop:!0,allowTouchMove:!1,hashNavigation:!1,on:{init:function(){d()},slideChangeTransitionStart:function(){$(".swiper-pagination").pagination({items:s,itemsOnPage:r,displayedPages:3,edges:1,cssStyle:"",currentPage:u++,prevText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-prev"></use></svg>',nextText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-next"></use></svg>',onPageClick:function(e,t){c.slideTo(e-1,400,!1)}}),u===a&&(u=1)}}}),c=document.querySelector(".swiper-container").swiper,document.createElement("div"));p.classList.add("error"),e&&e.addEventListener("focusout",function(e){if(""!==e.srcElement.value)if(u=1,0<e.srcElement.value&&""!=e.srcElement.value){p.remove(),this.style.border="1px solid #e3e8ee",r=Number(e.srcElement.value),a=Math.ceil(s/r+1),(n=document.querySelector(".swiper-container").swiper).destroy(!0,!0);var n=new Swiper(".swiper-container",{speed:400,autoplay:{delay:l},watchOverflow:!0,grabCursor:!0,loop:!0,allowTouchMove:!1,hashNavigation:!1,on:{init:function(){d()},slideChangeTransitionStart:function(){$(".swiper-pagination").pagination({items:s,itemsOnPage:r,displayedPages:3,edges:1,cssStyle:"",currentPage:u++,prevText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-prev"></use></svg>',nextText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-next"></use></svg>',onPageClick:function(e,t){n.slideTo(e-1,400,!1)}}),u===a&&(u=1)}}});n=document.querySelector(".swiper-container").swiper}else this.parentElement.append(p),this.style.border="1px solid #F3A8A8",p.innerHTML="Количество элементов на странице не может быть 0"}),t&&t.addEventListener("focusout",function(e){if(""!==e.srcElement.value)if(u=1,0<e.srcElement.value&&""!=e.srcElement.value){p.remove(),this.style.border="1px solid #e3e8ee",s=Number(e.srcElement.value),a=Math.ceil(s/r+1),(n=document.querySelector(".swiper-container").swiper).destroy(!0,!0);var n=new Swiper(".swiper-container",{speed:400,autoplay:{delay:l},watchOverflow:!0,grabCursor:!0,loop:!0,allowTouchMove:!1,hashNavigation:!1,on:{init:function(){d()},slideChangeTransitionStart:function(){$(".swiper-pagination").pagination({items:s,itemsOnPage:r,displayedPages:3,edges:1,cssStyle:"",currentPage:u++,prevText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-prev"></use></svg>',nextText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-next"></use></svg>',onPageClick:function(e,t){n.slideTo(e-1,400,!1)}}),u===a&&(u=1)}}});n=document.querySelector(".swiper-container").swiper}else this.parentElement.append(p),this.style.border="1px solid #F3A8A8",p.innerHTML="Общее количество элементов не может быть 0"}),n&&n.addEventListener("focusout",function(e){if(""!==e.srcElement.value)if(u=1,0<e.srcElement.value&&""!=e.srcElement.value){p.remove(),this.style.border="1px solid #e3e8ee",(n=document.querySelector(".swiper-container").swiper).destroy(!0,!0),l=e.srcElement.value;var n=new Swiper(".swiper-container",{speed:400,autoplay:{delay:l},watchOverflow:!0,grabCursor:!0,loop:!0,allowTouchMove:!1,hashNavigation:!1,on:{init:function(){d()},slideChangeTransitionStart:function(){$(".swiper-pagination").pagination({items:s,itemsOnPage:r,displayedPages:3,edges:1,cssStyle:"",currentPage:u++,prevText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-prev"></use></svg>',nextText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-next"></use></svg>',onPageClick:function(e,t){n.slideTo(e-1,400,!1)}}),u===a&&(u=1)}}});n=document.querySelector(".swiper-container").swiper}else this.parentElement.append(p),this.style.border="1px solid #F3A8A8",p.innerHTML="Время не может быть пустым"}),o&&o.addEventListener("focusout",function(e){if(""!==e.srcElement.value)if(u=1,320<=e.srcElement.value){i.style.width=e.srcElement.value+"px",p.remove(),this.style.border="1px solid #e3e8ee",(n=document.querySelector(".swiper-container").swiper).destroy(!0,!0);var n=new Swiper(".swiper-container",{speed:400,autoplay:{delay:l},watchOverflow:!0,grabCursor:!0,loop:!0,allowTouchMove:!1,hashNavigation:!1,on:{init:function(){d()},slideChangeTransitionStart:function(){$(".swiper-pagination").pagination({items:s,itemsOnPage:r,displayedPages:3,edges:1,cssStyle:"",currentPage:u++,prevText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-prev"></use></svg>',nextText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-next"></use></svg>',onPageClick:function(e,t){n.slideTo(e-1,400,!1)}}),u===a&&(u=1)}}});n=document.querySelector(".swiper-container").swiper}else this.parentElement.append(p),this.style.border="1px solid #F3A8A8",p.innerHTML="Ширина должна быть не менее 320px"})}}(),function(){var e=document.querySelector(".js-widget-open"),t=document.querySelector(".widget-popup");e&&e.addEventListener("click",function(){t.classList.add("popup--shown")})}();var initSelects=function(){var i,r,t=window.Scrollbar,e=document.querySelectorAll(".js-select-type"),n=document.querySelectorAll(".js-select-level"),o=document.querySelectorAll(".js-select-preview"),s=function(e){new window.SlimSelect({select:e,showSearch:!1,placeholder:"Тип виджета",data:i,afterOpen:function(){t.init(document.querySelector(".form-select .ss-list"),{continuousScrolling:!1})}})&&t.init(document.querySelector(".form-select .ss-main .ss-content .ss-list"),{continuousScrolling:!1})};0<n.length&&n.forEach(function(e){!function(e){new window.SlimSelect({select:e,showSearch:!1,afterOpen:function(){t.init(document.querySelector(".form-select .ss-list"),{continuousScrolling:!1})}})&&t.init(document.querySelector(".form-select .ss-main .ss-content .ss-list"),{continuousScrolling:!1})}(e)}),0<e.length&&e.forEach(function(e){!function(o){new window.SlimSelect({select:o,showSearch:!1,onChange:function(e){i=new Array,r=new Object;for(var t=0;t<e.length;t++)(r={}).text=e[t].value,i.push(r);var n=document.querySelector("[data-second-select="+o.dataset.select+"]");1<i.length?n.classList.add("ss-arrow-show"):n.classList.remove("ss-arrow-show"),s(n.querySelector(".js-select-preview"))},afterOpen:function(){t.init(document.querySelector(".form-select .ss-list"),{continuousScrolling:!1})}})&&t.init(document.querySelector(".form-select .ss-main .ss-content .ss-list"),{continuousScrolling:!1})}(e)}),0<o.length&&o.forEach(function(e){s(e)})};initSelects();