"use strict";!function(){var e=document.querySelectorAll(".js-button-favorive");function t(e){e.target.classList.toggle("button-star--active")}e&&e.forEach(function(e){e.addEventListener("click",t)})}(),function(){function e(e,t){Array.prototype.forEach.call(e,function(e){e.addEventListener("click",function(e){e.preventDefault(),window.openPopup(t);e=t.querySelectorAll(".js-text-hidden");e.length&&window.openText(e),window.initTable()})})}var t=document.querySelector(".js-comment-popup--add"),o=document.querySelectorAll(".js-comment-add");t&&o.length&&e(o,t);o=document.querySelector(".js-comment-popup--edit"),t=document.querySelectorAll(".js-comment-edit");o&&t.length&&e(t,o);t=document.querySelector(".js-comment-popup--your"),o=document.querySelectorAll(".js-comment-your");t&&o.length&&e(o,t);o=document.querySelector(".js-table-popup"),t=document.querySelectorAll(".js-table");o&&t.length&&e(t,o);t=document.querySelector(".js-comment-popup--table"),o=document.querySelectorAll(".js-comment-table");t&&o.length&&e(o,t)}(),function(){var e,t,o;document.querySelector(".commentary-add")&&(e=document.querySelector(".commentary-add__textarea"),t=e.querySelector("textarea"),o=e.querySelector("#textarea-error-field"),t.addEventListener("input",function(){500<=t.value.length?(e.classList.add("commentary-add__textarea--warning"),o.textContent="Осталось символов: "+Math.abs(1e3-t.value.length)):e.classList.remove("commentary-add__textarea--warning"),1e3<=t.value.length?(e.classList.add("commentary-add__textarea--error"),o.textContent="Вы превысили лимит символов на "+Math.abs(1e3-t.value.length)):e.classList.remove("commentary-add__textarea--error")}))}(),function(){var r,l,c,e,t,a;document.querySelector("#edit-comment")&&(r=document.querySelector(".hearings__comments"),l=document.querySelector(".your-comment"),c=document.querySelector("#edit-comment-block"),e=l.querySelector("#edit-comment"),t=l.querySelector("#delete-comment"),a=l.querySelector(".your-comment__text"),t.addEventListener("click",function(e){e.preventDefault(),l.remove()}),e.addEventListener("click",function(e){e.preventDefault(),l.classList.add("visually-hidden");var t=c.content.firstElementChild.cloneNode(!0),o=t.querySelector(".commentary-add__textarea"),n=o.querySelector("textarea"),i=o.querySelector("#textarea-error-field"),s=t.querySelector("#commentary-save");t.querySelector("textarea").value=a.innerText,n.addEventListener("input",function(){500<=n.value.length?(o.classList.add("commentary-add__textarea--warning"),i.textContent="Осталось символов: "+Math.abs(1e3-n.value.length)):o.classList.remove("commentary-add__textarea--warning"),1e3<=n.value.length?(o.classList.add("commentary-add__textarea--error"),i.textContent="Вы превысили лимит символов на "+Math.abs(1e3-n.value.length)):o.classList.remove("commentary-add__textarea--error")}),s.addEventListener("click",function(){e.preventDefault(),0<n.value.length&&n.value.length<1e3&&(a.innerText=n.value,t.remove(),l.classList.remove("visually-hidden"))}),r.prepend(t)}))}(),function(){var t,e,o,n=document.querySelector(".js-answers__form");n&&(t=n.querySelector(".js-count-answer"),e=document.querySelector(".js-answers__count"),o=document.querySelector(".js-answers__all-count"),(t||e||o)&&(e.addEventListener("mouseover",function(){t.focus()}),t.onblur=function(){t.value<1?t.value=1:t.value>+o.textContent&&(t.value=+o.textContent),e.classList.remove("answers__count--hover")},t.onfocus=function(){e.classList.add("answers__count--hover")},t.oninput=function(){t.value=t.value.replace(/[^\+\d]/g,""),t.focus(),e.classList.add("answers__count--hover")},n.addEventListener("submit",function(e){e.preventDefault(),t.blur()})))}(),function(){var e=document.querySelectorAll(".confirmation-popup[data-modal]");e.length&&e.forEach(function(t){function o(e){var t;t=l,e.keyCode===r&&t()}var e=t.getAttribute("data-modal"),n=t.querySelector(".confirmation-popup__body"),i=document.querySelectorAll('button[data-modal="'+e+'"]'),s=t.querySelector(".confirmation-popup__close-btn"),e=t.querySelector(".confirmation-popup__back-btn"),r=27,l=function(){t.classList.remove("confirmation-popup--show"),document.querySelector("body").style.overflow="visible",document.removeEventListener("keydown",o)};i.forEach(function(e){e.addEventListener("click",function(){t.classList.add("confirmation-popup--show"),document.querySelector("body").style.overflow="hidden",document.addEventListener("keydown",o)})}),s.addEventListener("click",l),e.addEventListener("click",l),t.addEventListener("click",l),n.addEventListener("click",function(e){return e.stopPropagation(),e.stopImmediatePropagation(),!1})})}(),window.var={keyCode:{ENTER:13,ESC:27},resolution:{DESKTOP:1200,TABLET:768,MOBILE:320}},function(){var e=document.querySelector(".js_cookie"),t=document.querySelector(".js-cookie__button");e&&t&&(document.body.classList.add("page-body--cookie"),t.addEventListener("click",function(){e.classList.add("js_hide"),document.body.classList.remove("page-body--cookie")}))}(),function(){var e,o,n,i,s,t=document.querySelectorAll(".js-collapse-button"),r=document.querySelectorAll(".js-collapse-content");r.length&&(o=function(){r.forEach(function(e){e.style.setProperty("--height",e.scrollHeight+"px")})},n=250,(e=function(){var e=this,t=arguments;clearTimeout(s),s=setTimeout(function(){s=null,i||o.apply(e,t)},n),i&&!s&&o.apply(e,t)})(),window.addEventListener("resize",function(){e()})),t.length&&t.forEach(function(e){function t(){"false"===o.getAttribute("data-collapsed")?(o.setAttribute("data-collapsed","true"),n.textContent="Контакты",e.classList.remove("collapsed")):(o.setAttribute("data-collapsed","false"),n.textContent="Свернуть",e.classList.add("collapsed"))}var o=e.parentElement.querySelector(".js-collapse-content"),n=e.querySelector("span");t(),e.addEventListener("click",t)})}(),function(){var d=window.Scrollbar;class t{constructor(){this._selects=null,this._selectElement=null,this._activeIndex=null,this._startText=null,this._onDocumentClick=this._onDocumentClick.bind(this),this._onEscapePress=this._onEscapePress.bind(this),this._onSelectItemClick=this._onSelectItemClick.bind(this),this._onSelectItemKeydown=this._onSelectItemKeydown.bind(this),this._onLastItemKeydown=this._onLastItemKeydown.bind(this),this._onSelectClick=this._onSelectClick.bind(this),this._onSelectKeydown=this._onSelectKeydown.bind(this),window.selectInit=this.init.bind(this)}_createMultiString(e){return e.length?`Выбрано ${e.length}`:this._startText}_setSelectActiveState(e,t,o){var n=o.querySelector(".custom-select__text"),i=o.querySelectorAll('.custom-select__item[aria-selected="true"]'),s=o.querySelector(".custom-select__label"),r=this._createMultiString(i);n.style.transition="0s",s&&(s.style.transition="0s"),setTimeout(()=>{s&&(s.style.transition=null),n.style.transition=null},300),e&&t?(o.classList.add("not-empty"),n.innerHTML=r):e||(o.classList.add("not-empty"),n.innerHTML=i[0].innerHTML)}_closeSelect(){var e=document.querySelector("[data-select].is-open");document.removeEventListener("click",this._onDocumentClick),document.removeEventListener("keydown",this._onEscapePress),e&&e.classList.remove("is-open")}_onSelectElementClickAction(e,t){var o=e.closest(".custom-select"),n=o.dataset.multiple,i=o.dataset.insert,s=o.querySelector(".custom-select__text"),r=e.innerText,l=o.querySelectorAll("option"),c=o.querySelector("select"),a=new CustomEvent("change"),d=new CustomEvent("input");c.dispatchEvent(a),c.dispatchEvent(d);var u,p,m,a=c.closest("form");a&&(d=new CustomEvent("change"),c=new CustomEvent("input"),a.dispatchEvent(d),a.dispatchEvent(c)),n?"true"===i?"true"===e.getAttribute("aria-selected")?(e.setAttribute("aria-selected","false"),p=o.querySelectorAll('.custom-select__item[aria-selected="true"]'),o.querySelectorAll(".custom-select__item").forEach(e=>e.classList.remove("has-separator")),(u=o.querySelector('.custom-select__item:not([aria-selected="true"]):not(.is-hidden)'))&&p.length&&u.classList.add("has-separator"),m=this._createMultiString(p),l[t+1].selected=!1,(s.innerText=m)||(o.classList.remove("not-empty"),o.classList.remove("is-valid"))):(e.setAttribute("aria-selected","true"),o.querySelectorAll(".custom-select__item").forEach(e=>e.classList.remove("has-separator")),(u=o.querySelector('.custom-select__item:not([aria-selected="true"]):not(.is-hidden)'))&&u.classList.add("has-separator"),p=o.querySelectorAll('.custom-select__item[aria-selected="true"]'),m=this._createMultiString(p),s.innerText=m,o.classList.add("not-empty"),o.classList.add("is-valid"),l[t+1].selected=!0):"true"===e.getAttribute("aria-selected")?(e.setAttribute("aria-selected","false"),l[t+1].selected=!1):(e.setAttribute("aria-selected","true"),l[t+1].selected=!0):(m=o.querySelector('.custom-select__item[aria-selected="true"]'),"true"===e.getAttribute("aria-selected")||(m&&(m.setAttribute("aria-selected","false"),o.classList.remove("not-empty"),o.classList.remove("is-valid")),s.innerText=r,e.setAttribute("aria-selected","true"),o.classList.add("not-empty"),o.classList.add("is-valid"),l[t+1].selected=!0),this._closeSelect())}_onDocumentClick({target:e}){e.closest(".custom-select")||this._closeSelect()}_onEscapePress(e){"Escape"===e.key&&this._closeSelect()}_onSelectItemClick(e,t){this._onSelectElementClickAction(e,t)}_onSelectItemKeydown(e,t,o){"Enter"===e.key&&this._onSelectElementClickAction(t,o)}_onLastItemKeydown(e){"Tab"===e.key&&this._closeSelect()}_onSelectClick(e){var t=e.target.closest("[data-select]"),e=document.querySelector("[data-select].is-open");t.classList.remove("is-invalid"),e&&e===t?e.classList.remove("is-open"):(e&&this._closeSelect(),document.addEventListener("click",this._onDocumentClick),document.addEventListener("keydown",this._onEscapePress),t.classList.contains("is-open")?t.classList.remove("is-open"):t.classList.add("is-open"))}_onSelectKeydown(e){var t=e.target.closest("[data-select]");t.classList.remove("is-invalid"),e.shiftKey&&"Tab"===e.key&&t.closest(".is-open")&&this._closeSelect()}_setActiveSelectItemsState(o,e){let n=!0;this._activeIndex=[],e.forEach((e,t)=>{o?"true"===e.getAttribute("aria-selected")&&this._activeIndex.push(t):"true"===e.getAttribute("aria-selected")&&n?(this._activeIndex.push(t),n=!1):e.setAttribute("aria-selected","false")})}_createSelectStructure(e){var n,t,o,i,s,r,l,c,a=e.querySelector("select");this._startText=e.querySelector(".custom-select__text").innerText,a?this._selectElement=null:(n={items:[]},l=e.dataset.multiple,s=e.dataset.id,i=e.dataset.name,r=e.dataset.required,o=e.dataset.insert,t=e.querySelector(".custom-select__list"),a=e.querySelectorAll(".custom-select__item"),this._setActiveSelectItemsState(l,a),d.init(t,{continuousScrolling:!1}),this._activeIndex.length&&(n.activeIndex=this._activeIndex,this._setSelectActiveState(l,o,e)),n.name=i||!1,n.id=s||!1,n.required=Boolean(r),n.multiple=Boolean(l),a.forEach(e=>{var t=e.dataset.selectValue,o={};o.text=e.innerText,o.value=t,n.items.push(o)}),((e,t,o="beforeend")=>{switch(o){case"prepend":e.prepend(t);break;case"afterend":e.after(t);break;case"beforeend":e.append(t)}})(e,([{id:o,items:i,multiple:s,name:r,required:l,activeIndex:a=[]}]=[n],a=`<select ${o?`id='${o}'`:""} ${r?`name='${r}'`:""} ${s?"multiple":""} ${l?"required":""} tabindex="-1" aria-hidden="true">
              <option value=""></option>
              ${i=i,c=a,i.map((e,t)=>{return c.length&&c.find(e=>e===t)===t?`<option ${e.value?`value=${e.value}`:""} selected>${e.text?`${e.text}`:""}</option>`:`<option ${e.value?`value=${e.value}`:""}>${e.text?`${e.text}`:""}</option>`}).join("\n")}
            </select>`,(i=document.createElement("div")).innerHTML=a,i.firstChild)),this._selectElement=e,this._activeIndex=null)}_initSearch(o){var n,i,s=o.querySelector(".custom-select__search input");s&&(n=o.querySelectorAll(".custom-select__item"),(i=o.querySelector(".custom-select__search-clean")).addEventListener("click",()=>{s.value="";var e=new CustomEvent("input");s.dispatchEvent(e)}),s.addEventListener("input",({target:e})=>{e.value?i.classList.add("is-active"):i.classList.remove("is-active"),n.forEach(e=>{e.innerText.toLowerCase().includes(s.value.toLowerCase())?e.classList.remove("is-hidden"):e.classList.add("is-hidden")});var t=o.querySelectorAll(".custom-select__item:not(.is-hidden)"),e=o.querySelector(".custom-select__empty-box");e&&(t.length?e.classList.remove("is-active"):e.classList.add("is-active"));t=o.querySelectorAll(".custom-select__item"),e=o.querySelectorAll('.custom-select__item[aria-selected="true"]:not(.is-hidden)');t.forEach(e=>e.classList.remove("has-separator"));t=o.querySelector('.custom-select__item:not([aria-selected="true"]):not(.is-hidden)');t&&e.length&&t.classList.add("has-separator")}))}_setSelectAction(){var e,n;this._selectElement&&(e=this._selectElement.querySelector(".custom-select__button"),n=this._selectElement.querySelectorAll(".custom-select__item"),e.addEventListener("click",this._onSelectClick),e.addEventListener("keydown",this._onSelectKeydown),n.forEach((t,o)=>{t.addEventListener("click",()=>{this._onSelectItemClick(t,o)}),t.addEventListener("keydown",e=>{this._onSelectItemKeydown(e,t,o)}),o===n.length-1&&t.addEventListener("keydown",this._onLastItemKeydown)}))}init(){this._selects=document.querySelectorAll("[data-select]"),this._selects.forEach(e=>{this._createSelectStructure(e),this._initSearch(e),this._setSelectAction()})}}window.addEventListener("DOMContentLoaded",()=>{window.addEventListener("load",()=>{var e=new t;(window.customSelect=e).init()})}),console.log()}();var initFileUploader=function(){var e,n,i,s,t,r=document.querySelector(".js-upload-file-container");r&&(e=r.querySelector(".js-user-files"),n=r.querySelector(".file-uploads__preview-container"),i=[],s=function(t,o){var e=document.createElement("button");e.setAttribute("type","button"),e.setAttribute("aria-label","удалить загруженные данные"),t.appendChild(e),e.addEventListener("click",function(){t.remove();var e=i.indexOf(o);-1<e&&i.splice(e,1)})},t=function(e){var t=document.createElement("div");t.classList.add("file-wrapper");var o=document.createElement("span");o.textContent=e.name,t.appendChild(o),s(t,e),n.appendChild(t),o=t,e=r.querySelector(".js-user-files"),(t=e.cloneNode(!0)).removeAttribute("id"),o.appendChild(t),e.value&&(e.value="")},n.querySelectorAll(".file-wrapper").forEach(function(e){var t=e.querySelector("span");i.push(t),s(e,t)}),e.addEventListener("change",function(){e.files.length&&e.files.forEach(function(e){i.push(e),t(e)})}))};initFileUploader(),function(){function e(t){var e;t&&(e=t.querySelector(".js-filter__open-btn"),t.classList.add("filter--js"),e.addEventListener("click",function(e){t.classList.toggle("filter--open"),e.currentTarget.textContent=t.classList.contains("filter--open")?"Скрыть фильтры":"Фильтры"}))}e(document.querySelector(".js-filter")),window.initJsFilter=e}(),function(){var e=document.querySelectorAll(".js-datepicker");e.length&&e.forEach(function(e){new window.Datepicker(e,{language:"ru",minDate:new Date,autohide:!0})})}(),function(){function t(e){var t=new window.SlimSelect({select:e,showSearch:!1,showContent:"down",placeholder:e.dataset.placeholderText||"",allowDeselect:!!e.dataset.deselect,deselectLabel:'<button type="button"><span class="visually-hidden">Сбросить фильтр по голосам</span><svg width="12" height="12" viewBox="0 0 12 12"><path d="M1 1L11 11M11 1L1 11" stroke-width="2"/></svg></button>',afterClose:function(){window.Scrollbar.destroy(o.querySelector(".ss-list"))},afterOpen:function(){window.Scrollbar.init(o.querySelector(".ss-list"),{continuousScrolling:!1})}}),o=t.slim.container,n=e.querySelectorAll("option[title]"),i=o.querySelectorAll(".ss-option[data-id]");return o.setAttribute("title",e.title),n.forEach(function(e,t){i[t].setAttribute("title",e.title)}),t}var e=document.querySelectorAll(".js-form-select select:not([multiple])");e.forEach(function(e){t(e)});var o,e=document.querySelector(".js-form-select-improvement select");e&&(o=e,new window.SlimSelect({select:o,showSearch:!1})),window.addSelect=t}();var resetSlider=function(e){var t=e.querySelector(".js-gallery-full"),o=e.querySelector(".js-gallery-full-frame"),n=e.querySelector(".js-full-gallery-link.active");e.swiper&&(e.swiper.destroy(),e.swiper=null),o&&(o.innerHTML=""),t&&t.classList.add("hidden"),n&&n.classList.remove("active")};window.galleryInSliderReset=resetSlider,document.addEventListener("click",function(e){var t,o,n,i,s,r=e.target.closest(".js-full-gallery-link"),l=e.target.closest(".js-gallery-full-close-btn"),c=e.target.closest(".js-gallery-full-wrap");r&&(e.preventDefault(),c.swiper?c.swiper.slideToLoop(+r.dataset.index):(t=e.target,(s=t.closest(".js-gallery-full-wrap"))&&(o=s.querySelectorAll(".gallery__tape .swiper-slide"),s.querySelector(".js-gallery-full").classList.remove("hidden"),n=s.querySelector(".js-gallery-full-frame"),r=s.querySelector(".js-gallery-full-prev"),e=s.querySelector(".js-gallery-full-next"),(i=document.createElement("div")).classList.add("swiper-wrapper"),Array.prototype.forEach.call(o,function(e){var t=e.querySelector(".gallery__item").cloneNode(!0);t.querySelector(".gallery__item-img").src=e.querySelector(".gallery__item-link").href,t.classList.remove("gallery__item"),t.classList.add("swiper-slide"),t.classList.add("gallery-full__item"),i.appendChild(t)}),n.appendChild(i),s.swiper=new window.Swiper(n,{initialSlide:+t.dataset.index,slidesPerView:1,watchOverflow:!0,observer:!0,observerParent:!0,spaceBetween:16,grabCursor:!0,loop:!0,navigation:{prevEl:r,nextEl:e},on:{slideChange:function(){var e=s.querySelector(".js-full-gallery-link.active"),t=s.querySelector('.js-full-gallery-link[data-index="'+this.realIndex+'"]');e&&e.classList.remove("active"),t&&t.classList.add("active")}}}),(e=s.querySelector(".js-single-image"))&&e.remove()))),l&&resetSlider(c)}),function(){var i,s,r,l,c,a,d,u,p=document.querySelector(".js-gallery-popup");p&&(i=p.querySelector(".js-gallery-popup__frame"),s=p.querySelector(".js-gallery-popup__nav-btn--prev"),r=p.querySelector(".js-gallery-popup__nav-btn--next"),l=p.querySelector(".js-gallery-popup__photo-description"),c=p.querySelector(".js-gallery-popup__counter-current"),a=p.querySelector(".js-gallery-popup__counter-total"),d=p.querySelector(".popup__bar--bottom"),u=null,document.addEventListener("click",function(e){var t,o,n;e.target.classList.contains("js-gallery__item-link")&&(e.preventDefault(),u&&(u.destroy(),i.innerHTML=""),window.openPopup(p),t=e.target,o=t.parentElement.parentElement.children,e=t.querySelector(".gallery__item-text"),(n=document.createElement("div")).classList.add("swiper-wrapper"),Array.prototype.forEach.call(o,function(e){e=e.querySelector(".gallery__item").cloneNode(!0);e.classList.add("swiper-slide"),n.appendChild(e)}),i.appendChild(n),u=new window.Swiper(i,{initialSlide:+t.dataset.index,slidesPerView:1,watchOverflow:!0,grabCursor:!0,loop:!0,navigation:{prevEl:s,nextEl:r},on:{slideChange:function(){l.textContent=o[this.realIndex].querySelector(".gallery__item-text").textContent,c.textContent=+this.realIndex+1}}}),l.textContent=e.textContent,c.textContent=+t.dataset.index+1,a.textContent=o.length,o.length<=1&&d.classList.add("d-none"))}))}(),function(){var t,e=document.querySelectorAll(".js-gallery");e.length&&(t=function(e){var t,o;e.querySelectorAll(".js-gallery__item-link").forEach(function(e,t){e.dataset.index=t}),t=e,o=new window.Swiper(t,{slidesPerView:"auto",spaceBetween:16,breakpoints:{320:{spaceBetween:12}},watchOverflow:!0,grabCursor:!0,observer:!0,observerParent:!0,observeSlideChildren:!0}),t.swiper=o,e.classList.add("is-inited")},e.forEach(function(e){t(e)}),window.initSlider=t)}(),function(){var t,o,n;document.querySelector(".hearings-result__status-info")&&(t=document.querySelector(".js-hearings-parent"),o=t.querySelector(".hearings-result__status-info"),n=document.querySelector("#poll-result"),o.addEventListener("click",function(e){e.preventDefault(),o.remove();e=n.content.firstElementChild.cloneNode(!0);t.append(e)}))}(),function(){var o,t=document.querySelector(".js-image-popup");t&&(o=t.querySelector(".js-image-popup-frame"),document.addEventListener("click",function(e){e.target.classList.contains("js-image-popup-link")&&(e.preventDefault(),window.openPopup(t),function(e){o.innerHTML="";var t=document.createElement("img"),e=e.querySelector("img");t.setAttribute("src",e.getAttribute("src")),o.appendChild(t)}(e.target))}))}(),function(){function t(e){var t,o,n,i,s=e.querySelector(".info-banner__text"),r=e.querySelector(".info-banner__button");s&&r&&!e.classList.contains("info-banner_enough-lines_true")&&!e.classList.contains("info-banner_enough-lines_false")&&(t=r.querySelector(".info-banner-button__text"),o=function(){r.classList.contains("opened")?t.textContent="Свернуть":t.textContent="Развернуть"},n=s.getBoundingClientRect().height,i=+getComputedStyle(s).lineHeight.replace("px",""),n=Math.ceil(n/i),console.log(n),i=3,(i=e.querySelector(".info-banner__title")?2:i)<n?(e.classList.add("info-banner_enough-lines_true"),r.addEventListener("click",function(e){e.currentTarget.classList.toggle("opened"),s.classList.toggle("opened"),o()})):(e.classList.add("info-banner_enough-lines_false"),o()))}var e=document.querySelectorAll(".info-banner");0<e.length&&e.forEach(function(e){t(e)}),window.initInfoBannerToggle=t}();var tooltipsInit=function(){var e,t;document.querySelectorAll(".info-tooltip").length&&(e=function(e){var t=e.target.closest(".info-tooltip");if(t){t.classList.add("shown");var o=t.querySelector(".info-tooltip__text"),e=o.getBoundingClientRect();if(e.left<=20)return o.style.left=-(t.getBoundingClientRect().left-20)+"px",void o.classList.add("info-tooltip__text--side-close");e.right>=document.documentElement.clientWidth-20&&(o.style.right=-(document.documentElement.clientWidth-t.getBoundingClientRect().right-20)+"px",o.classList.add("info-tooltip__text--side-close"))}},t=function(e){e=e.target.closest(".info-tooltip");e&&(e.classList.remove("shown"),(e=e.querySelector(".info-tooltip__text")).classList.remove("info-tooltip__text--side-close"),e.style="")},document.addEventListener("mouseover",e),document.addEventListener("mouseout",t),document.addEventListener("focusin",e),document.addEventListener("focusout",t))};tooltipsInit();var initChoices=function(){var o=window.Scrollbar,e=document.querySelectorAll("._select");0<e.length&&e.forEach(function(e){new window.Choices(e,{searchEnabled:!1,itemSelectText:"",shouldSort:!1,placeholder:!0,placeholderValue:"Выберите из списка"}),e.addEventListener("showDropdown",function(){o.init(e.parentElement.nextElementSibling.querySelector(".choices__list"),{continuousScrolling:!1})}),e.addEventListener("hideDropdown",function(){setTimeout(function(){o.destroy(e.parentElement.nextElementSibling.querySelector(".choices__list"),{continuousScrolling:!1})},500)})});e=document.querySelectorAll("._select-search");0<e.length&&e.forEach(function(t){new Choices(t,{searchEnabled:!0,itemSelectText:"",shouldSort:!1,placeholder:!0,placeholderValue:"Выберите из списка",noResultsText:"Ни чего не найдено",searchPlaceholderValue:"Начните вводить текст"}),t.addEventListener("showDropdown",function(e){o.init(t.parentElement.nextElementSibling.querySelector(".choices__list"),{continuousScrolling:!1})}),t.addEventListener("hideDropdown",function(e){setTimeout(function(){o.destroy(t.parentElement.nextElementSibling.querySelector(".choices__list"),{continuousScrolling:!1})},500)})})};(window.initChoices=initChoices)(),function(){var e=document.querySelectorAll(".preview-input"),l=document.querySelector(".js-popup:not(.js-popup--gallery-full):not(.js-popup--gallery-single)");e.length&&l&&e.forEach(function(e){var t=e.querySelector(".zoom-button"),n=e.querySelector(".preview-input__image-wrapper img"),i=e.querySelector(".preview-input__description"),s=l.querySelector(".gallery-popup__frame img"),r=l.querySelector(".gallery-popup__photo-description");t.addEventListener("click",function(){var e,t,o;t=s,o=(e=n).getAttribute("src"),(o=e.dataset.thumbnail?e.dataset.thumbnail:o)?t.setAttribute("src",o):t.removeAttribute("src"),o=r,(t=i)?(t=t.textContent,o.textContent=t):o.textContent="",window.openPopup(l)})})}(),function(){document.querySelector(".landscaping-form__section.map-section");var a,d=document.querySelector("#map-hidden"),u=document.querySelector("#map-search"),e=document.querySelector("#map"),p=document.querySelector("#user-coords"),m=document.querySelectorAll(".mapMenuIcon");document.querySelector(".mapMenu");e&&(a=e.getAttribute("data-icon"),ymaps.ready(function(){var i,n,t,e=new ymaps.SuggestView("map-search");{var o;p.value?ymaps.geocode(p.value,{}).then(function(e){e=e.geoObjects.get(0).geometry.getCoordinates();i=new ymaps.Map("map",{center:e,zoom:15,controls:["zoomControl"]},{searchControlProvider:"yandex#search",suppressMapOpenBlock:!0}),n=new ymaps.GeoObject({geometry:{type:"Point",coordinates:e}},{iconLayout:"default#image",iconImageHref:a,iconImageSize:[36,54],draggable:!0}),d.value=e,i.geoObjects.add(n),i.geoObjects.events.add(["dragend"],function(e){e=i.options.get("projection").fromGlobalPixels(i.converter.pageToGlobal(e.get("position")),i.getZoom());c(d.value=e),ymaps.geocode(e).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")})}),i.events.add("click",function(e){e=e.get("coords");ymaps.geocode(e).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")}),l(e)})}):d.value?(o=d.value.split(",").map(function(e){return Number(e)}),i=new ymaps.Map("map",{center:o,zoom:15,controls:["zoomControl"]},{searchControlProvider:"yandex#search",suppressMapOpenBlock:!0}),n=new ymaps.GeoObject({geometry:{type:"Point",coordinates:o}},{iconLayout:"default#image",iconImageHref:a,iconImageSize:[36,54],draggable:!0}),ymaps.geocode(o).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")}),i.geoObjects.add(n),i.geoObjects.events.add(["dragend"],function(e){e=i.options.get("projection").fromGlobalPixels(i.converter.pageToGlobal(e.get("position")),i.getZoom());c(d.value=e),ymaps.geocode(e).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")})}),i.events.add("click",function(e){e=e.get("coords");ymaps.geocode(e).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")}),l(e)})):u.value?ymaps.geocode(u.value,{}).then(function(e){e=e.geoObjects.get(0).geometry.getCoordinates();i=new ymaps.Map("map",{center:e,zoom:15,controls:["zoomControl"]},{searchControlProvider:"yandex#search",suppressMapOpenBlock:!0}),n=new ymaps.GeoObject({geometry:{type:"Point",coordinates:e}},{iconLayout:"default#image",iconImageHref:a,iconImageSize:[36,54],draggable:!0}),d.value=e,i.geoObjects.add(n),i.geoObjects.events.add(["dragend"],function(e){e=i.options.get("projection").fromGlobalPixels(i.converter.pageToGlobal(e.get("position")),i.getZoom());c(d.value=e),ymaps.geocode(e).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")})}),i.events.add("click",function(e){e=e.get("coords");ymaps.geocode(e).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")}),l(e)})}):i=new ymaps.Map("map",{center:[55.753994,37.622093],zoom:15,controls:["zoomControl"]},{searchControlProvider:"yandex#search",suppressMapOpenBlock:!0})}function s(e){var t,o;e.preventDefault(),m.forEach(function(e){e.classList.remove("active")}),this.classList.add("active"),this.classList.contains("mapPolygon")&&(function(){var o,n=new ymaps.Polygon([],{},{editorDrawingCursor:"crosshair",editorMaxPoints:5,strokeColor:"#0000FF",strokeWidth:5});i.geoObjects.add(n);var e=new ymaps.Monitor(n.editor.state);e.add("drawing",function(e){var t;(o=n.geometry.getCoordinates())[0]&&(o[0].forEach(function(e,t){t+="coords";(t=document.createElement("input")).name="user-coords[]",t.type="hidden",t.value=e,document.querySelector(".coordsFigure").append(t)}),(t=document.createElement("input")).name="zoom",t.type="hidden",t.value=i.getZoom(),document.querySelector(".coordsFigure").append(t),(t=document.createElement("input")).name="center",t.type="hidden",t.value=i.getCenter(),document.querySelector(".coordsFigure").append(t)),n.options.set("strokeColor",e?"#FF0000":"#0000FF")}),n.events.add("click",function(){console.log("polygon clicked")}),e.add("beforedrag",function(){console.log("polygon clicked")}),n.editor.startDrawing()}(),r()),this.classList.contains("mapLineBroken")&&(t=new ymaps.Polyline([],{},{strokeColor:"#00000088",strokeWidth:4,editorMaxPoints:6,editorMenuManager:function(e){return e.push({title:"Удалить линию",onClick:function(){i.geoObjects.remove(t)}}),e}}),i.geoObjects.add(t),t.editor.startDrawing(),r()),this.classList.contains("mapLine")&&(o=new ymaps.Polyline([],{},{strokeColor:"#00000088",strokeWidth:2,editorMaxPoints:2,editorMenuManager:function(e){return e.push({title:"Удалить линию",onClick:function(){i.geoObjects.remove(o)}}),e}}),i.geoObjects.add(o),o.editor.startDrawing(),r()),this.classList.contains("mapPin")&&(n=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[55.753994,37.622093]}},{iconLayout:"default#image",iconImageHref:a,iconImageSize:[36,54],draggable:!0}),i.geoObjects.add(n),i.geoObjects.events.add(["dragend"],function(e){e=i.options.get("projection").fromGlobalPixels(i.converter.pageToGlobal(e.get("position")),i.getZoom());c(d.value=e),ymaps.geocode(e).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")})}),i.events.add("click",function(e){e=e.get("coords");ymaps.geocode(e).then(function(e){document.querySelector("#map-search").value=e.geoObjects.get(0).getAddressLine(),$(u).trigger("keyup")}),l(e)}),r())}function r(){m.forEach(function(e){e.classList.contains("active")||e.classList.add("disabled")})}function l(e){var t;d.value=e,n?n.geometry.setCoordinates(e):(t=e,n=new ymaps.GeoObject({geometry:{type:"Point",coordinates:t}},{iconLayout:"default#image",iconImageHref:a,iconImageSize:[36,54],draggable:!0}),i.geoObjects.add(n),n.events.add("dragend",function(){c(n.geometry.getCoordinates())})),c(e)}function c(e){ymaps.geocode(e).then(function(e){t=e.geoObjects.get(0),n.properties.set({iconCaption:[t.getLocalities().length?t.getLocalities():t.getAdministrativeAreas(),t.getThoroughfare()||t.getPremise()].filter(Boolean).join(", "),balloonContent:t.getAddressLine()})})}e.events.add("select",function(o){ymaps.geocode(o.get("item").value,{}).then(function(e){var t=e.geoObjects.get(0),e=t.geometry.getCoordinates(),t=t.properties.get("boundedBy");o.get("item").value,l(e),i.setBounds(t,{checkZoomRange:!0})})}),m.forEach(function(e){e.addEventListener("click",s)})}))}(),function(){var e=document.querySelectorAll(".js-like-counter"),t="js_likes_container";function o(e){var t,o=e.currentTarget;o.parentElement.querySelector(".liked")||(t=o.querySelector("span"),e=parseInt(t.textContent,10),o.classList.contains("liked")?(o.classList.remove("liked"),t.textContent=--e):(o.classList.add("liked"),t.textContent=++e),n(o))}function n(e){e=e.parentElement;e.classList.contains(t)&&e.querySelector("button:not(.liked)")&&e.querySelectorAll("button").forEach(function(e){e.removeEventListener("click",o)})}e.length&&e.forEach(function(e){e.addEventListener("click",o)})}(),function(){var e=document.querySelector(".js-location-switcher");e&&e.classList.add("location-switcher--js")}(),function(){var e,t,o,n,i,s,r,l,c,a=document.querySelector(".js-page-header");a&&(e=document.documentElement.clientWidth,t=a.querySelector(".js-page-header__bar"),o=a.querySelector(".js-main-menu"),n=o.querySelector(".container"),i=a.querySelector(".js-menu-btn"),s=i.querySelector(".menu-btn__text"),r=document.querySelectorAll(".js-open-popup"),l=function(){o.style.height=a.classList.contains("page-header--open-menu")&&document.documentElement.clientWidth<window.const.resolution.DESKTOP?window.innerHeight-t.offsetHeight+"px":""},c=function(){a.classList.remove("page-header--open-menu"),window.bodyScrollLock.enableBodyScroll(n),i.classList.remove("menu-btn--close"),s.textContent="Открыть основное меню",window.adjustPageContentTopPadding()},i.addEventListener("click",function(){a.classList.contains("page-header--open-menu")?c():(a.classList.add("page-header--open-menu"),window.bodyScrollLock.disableBodyScroll(n),i.classList.add("menu-btn--close"),s.textContent="Закрыть основное меню"),l()}),r.forEach(function(e){e.addEventListener("click",c)}),window.addEventListener("resize",function(){e!==document.documentElement.clientWidth&&(e=document.documentElement.clientWidth,c()),l()}))}(),function(){var c=$("#improvement-map");0<!c.length||ymaps.ready(function(){var n=new ymaps.Map(c[0],{center:[55.76,37.64],controls:[],zoom:15},{searchControlProvider:"yandex#search"}),e=(new ymaps.ObjectManager({clusterize:!0,gridSize:32,clusterDisableClickZoom:!0}),ymaps.templateLayoutFactory.createClass("<div class='map-buttons'><div id='zoom-in'></div><div id='zoom-out'></div></div>",{build:function(){e.superclass.build.call(this),this.zoomInCallback=ymaps.util.bind(this.zoomIn,this),this.zoomOutCallback=ymaps.util.bind(this.zoomOut,this),$("#zoom-in").bind("click",this.zoomInCallback),$("#zoom-out").bind("click",this.zoomOutCallback)},clear:function(){$("#zoom-in").unbind("click",this.zoomInCallback),$("#zoom-out").unbind("click",this.zoomOutCallback),e.superclass.clear.call(this)},zoomIn:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()+1,{checkZoomRange:!0})},zoomOut:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()-1,{checkZoomRange:!0})}})),t=new ymaps.control.ZoomControl({options:{layout:e}}),o=ymaps.templateLayoutFactory.createClass("<div><div id='user-location'></div>",{build:function(){o.superclass.build.call(this),this.getLocation=ymaps.util.bind(this.userLocation,this),$("#user-location").bind("click",this.getLocation)},clear:function(){$("#user-location").unbind("click",this.getLocation),o.superclass.clear.call(this)},userLocation:function(){ymaps.geolocation.get({provider:"browser",mapStateAutoApply:!0}).then(function(e){e.geoObjects.options.set("preset","islands#blueCircleIcon"),n.geoObjects.add(e.geoObjects)})}}),i=new ymaps.control.GeolocationControl({options:{layout:o}});400<=window.innerWidth&&(n.controls.add(t,{float:"none",position:{right:"8px",top:"244px"}}),n.controls.add(i,{float:"none",position:{right:"8px",top:"324px"}}));var s=[];s=window.innerWidth<400?[-5,32]:[43,-27];var r=new ymaps.Clusterer({clusterIconLayout:ymaps.templateLayoutFactory.createClass('<div class="cluster-icon"><span>{{ properties.geoObjects.length }}</span></div>'),clusterIconShape:{type:"Rectangle",coordinates:[[0,0],[49,49]]}});n.events.add("balloonopen",function(e){e.get("target").options.set({iconImageHref:"img/pin-hover.svg"})}),n.events.add("balloonclose",function(e){e.get("target").options.set({iconImageHref:"img/pin.svg"})});var l=ymaps.templateLayoutFactory.createClass('<div class="popover right"><button type="button" aria-label="Закрыть информацию" class="close"></button><div class="arrow"></div><div class="popover-inner">$[[options.contentLayout observeSize minWidth=300 maxWidth=300 maxHeight=500]]</div></div>',{build:function(){this.constructor.superclass.build.call(this),this._$element=$(".popover",this.getParentElement()),this.applyElementOffset(),this._$element.find(".close").on("click",$.proxy(this.onCloseClick,this))},clear:function(){this._$element.find(".close").off("click"),this.constructor.superclass.clear.call(this)},onSublayoutSizeChange:function(){l.superclass.onSublayoutSizeChange.apply(this,arguments),this._isElement(this._$element)&&(this.applyElementOffset(),this.events.fire("shapechange"))},applyElementOffset:function(){window.innerWidth<400?this._$element.css({top:0}):this._$element.css({top:-this._$element[0].offsetHeight/2})},onCloseClick:function(e){e.preventDefault(),this.events.fire("userclose")},getShape:function(){if(!this._isElement(this._$element))return l.superclass.getShape.call(this);var e=this._$element.position();return new ymaps.shape.Rectangle(new ymaps.geometry.pixel.Rectangle([[e.left,e.top],[e.left+this._$element[0].offsetWidth+200,e.top+this._$element[0].offsetHeight+this._$element.find(".arrow")[0].offsetHeight]]))},_isElement:function(e){return e&&e[0]&&e.find(".arrow")[0]}}),i=c.data("link");ymaps.geoXml.load(i).then(function(e){var t=e.geoObjects.toArray();0<t.length&&n.setCenter([t[0].geometry._coordinates[0],t[0].geometry._coordinates[1]]);for(var o=0;o<t.length;o++)t[o].geometry._coordPath?n.geoObjects.add(t[o]):(t[o].options.set({balloonLayout:l,iconLayout:"default#image",iconImageHref:"img/pin.svg",iconImageSize:[28,40],hideIconOnBalloonOpen:!1,balloonPanelMaxMapArea:0,balloonOffset:s}),r.add(t[o]));n.geoObjects.add(r),e.mapState?e.mapState.applyToMap(n):n.setBounds(e.geoObjects.getBounds())})})}(),function(){var t,o,n,i=document.querySelector('[data-modal="projects-period"]'),s="modal--active",r=!1,l=350;function c(e){e=e.target;(e!==i&&!e.closest(".modal--"+i.dataset.modal+" .modal__content")&&t.classList.contains(s)||e.closest(".modal__close-btn"))&&(t.classList.remove(s),n.style.overflow="",document.removeEventListener("click",c),o.removeEventListener("click",c))}i&&i.addEventListener("click",function(e){e.preventDefault(),t=document.querySelector(".modal--"+i.dataset.modal),o=t.querySelector(".modal__close-btn"),n=document.querySelector("body"),t.classList.add(s),n.style.overflow="hidden",r||t.querySelectorAll(".modal__content-text").forEach(function(e){var t=e.textContent;t.length>l&&(e.textContent=t.slice(0,l)+"...")}),r=!0,document.addEventListener("click",c),o.addEventListener("click",c)})}(),function(){var t,o,e=document.querySelector(".js-moderator-comments");e&&(t=e.parentElement,o=window.debounce(function(){t.style.height="auto",t.style.height=t.scrollHeight+"px"},150),e.addEventListener("click",function(){var e;t.classList.contains("comments-tab--opened")?(t.classList.remove("comments-tab--opened"),t.removeAttribute("style"),window.removeEventListener("resize",o)):(t.classList.add("comments-tab--opened"),e=t.scrollHeight,t.style.height=e+"px",window.addEventListener("resize",o))}))}(),function(){function t(e){var t,o=new window.SlimSelect({select:e,showSearch:!1,showContent:"down",allowDeselectOption:!0,closeOnSelect:!1,placeholder:e.dataset.placeholderText||"",allowDeselect:!!e.dataset.deselect,afterOpen:function(){window.Scrollbar.init(i.querySelector(".ss-content"),{continuousScrolling:!1})},beforeOpen:function(){var e=o.slim.container,t=o.slim.content.querySelectorAll(".ss-option:not(.ss-hide)").length;e.classList.remove("two-column","three-column"),8<t&&t<=15&&e.classList.add("two-column"),14<t&&t<=21&&e.classList.add("three-column"),21<t&&(e.classList.add("three-column"),e.classList.add("fixed-height")),s()},afterClose:function(){window.Scrollbar.destroy(i.querySelector(".ss-content")),r(),o.select.element.closest("form").submit()},onChange:function(){n()}}),i=o.slim.container,n=function(){l(),c()},s=function(){var e=i.querySelector(".ss-content"),t=e.getBoundingClientRect().x,o=e.getBoundingClientRect().width,n=window.innerWidth,e=getComputedStyle(i).getPropertyValue("--colNum"),o=n-(t+o);16<=o||(!o-312?i.setAttribute("style","--colNum:"+(e-1)):!o-624&&i.setAttribute("style","--colNum:"+(e-2)))},r=function(){i.removeAttribute("style")},l=function(){o.selected().length?i.querySelector(".ss-add").classList.remove("ss-empty"):i.querySelector(".ss-add").classList.add("ss-empty")},c=function(){o.selected().length?i.querySelector(".ss-plus").textContent="Категорий выбрано: "+o.selected().length:i.querySelector(".ss-plus").textContent=e.dataset.placeholderText};return i.querySelector(".ss-add").classList.add("ss-empty"),i.querySelector(".ss-add").prepend(((t=document.createElement("button")).classList.add("ss-deselect-all"),t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),o.set([])}),t)),i.querySelector(".ss-add").appendChild(((t=document.createElement("div")).innerHTML='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.9833 12L8 7.02703L3.01667 12L1.5 10.4865L8 4L14.5 10.4865L12.9833 12Z" fill="#2C8ECC"/></svg>',t.children[0])),i.querySelector(".ss-plus").textContent=e.dataset.placeholderText,n(),o}var e=document.querySelectorAll(".js-multiple-select");e.forEach(function(e){t(e)}),window.addMultipleSelect=t}(),function(){var e,t,o,n=document.querySelector(".js-page-header");n&&(e=n.querySelector(".js-page-header__bar"),t=function(){document.documentElement.clientWidth>=window.const.resolution.DESKTOP&&0<window.pageYOffset?(n.classList.add("page-header--above-content"),n.style.top=-e.offsetHeight+"px"):(n.classList.remove("page-header--above-content"),n.style.top=0)},o=function(){document.body.style.paddingTop=n.offsetHeight+"px"},n.classList.add("page-header--js"),o(),t(),document.addEventListener("scroll",t),window.addEventListener("resize",function(){n.classList.remove("page-header--above-content"),o(),t()}),window.adjustPageContentTopPadding=o)}(),function(){function t(e){var t=new window.Swiper(e,{slidesPerView:"auto",spaceBetween:16,breakpoints:{320:{spaceBetween:12}},watchOverflow:!0,grabCursor:!0,observer:!0,observerParent:!0,observeSlideChildren:!0});return e.swiper=t}var o=document.querySelector(".js-projects-popup"),e=document.querySelectorAll(".js-projects__item-link");window.initSliderInPopup=t,e&&e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),window.openPopup(o),o.classList.contains("js-sliders-inited")||o.querySelectorAll(".js-gallery-in-popup").forEach(function(e){t(e)}),o.classList.add("js-sliders-inited")})}),window.openPopup=function(e){window.bodyScrollLock.disableBodyScroll(e),e.classList.add("popup--shown")};function n(e){window.bodyScrollLock.enableBodyScroll(e),e.classList.remove("popup--shown")}var i;o&&(i=o.querySelector(".js-popup__overlay"),e=o.querySelector(".js-popup__close-btn"),i&&i.addEventListener("click",function(){n(o)}),e&&e.addEventListener("click",function(){n(o)})),document.addEventListener("keydown",function(e){var t;t=o,(e=e).keyCode===window.const.keyCode.ESC&&t.classList.contains("popup--shown")&&(e.preventDefault(),n(t))})}(),function(){var e=document.querySelectorAll(".js-popup");window.openPopup=function(e){window.bodyScrollLock.disableBodyScroll(e,{reserveScrollBarGap:!0}),e.classList.add("popup--shown")};function n(e){window.bodyScrollLock.enableBodyScroll(e),e.classList.remove("popup--shown")}e.forEach(function(o){var e=o.querySelector(".js-popup__overlay"),t=o.querySelector(".js-popup__close-btn");e.addEventListener("click",function(){n(o)}),t.addEventListener("click",function(){n(o)}),document.addEventListener("keydown",function(e){var t;t=o,(e=e).keyCode===window.const.keyCode.ESC&&t.classList.contains("popup--shown")&&(e.preventDefault(),n(t))})})}(),function(){var n,e=document.querySelector("#map-progects"),i=document.querySelector("#mapProgectsCenter");function s(){var t=new ymaps.ObjectManager({clusterize:!0,gridSize:32,clusterDisableClickZoom:!0});n.geoObjects.add(t),$.ajax({url:"json/data.json"}).done(function(e){t.add(e)})}e&&(e.getAttribute("data-icon"),ymaps.ready(function(){i.value?ymaps.geocode(i.value,{}).then(function(e){var t=e.geoObjects.get(0),o=t.geometry.getCoordinates(),t=t.properties.get("boundedBy"),e=(e.geoObjects.get(0).getLocalities().toString().trim(),e.geoObjects.get(0).getAdministrativeAreas()[0].toString().trim());e!==i.value&&""!==e?ymaps.geocode(e,{}).then(function(e){n=new ymaps.Map("map-progects",{center:o,zoom:12,controls:["zoomControl"]},{searchControlProvider:"yandex#search",suppressMapOpenBlock:!0,restrictMapArea:e.geoObjects.get(0).properties.get("boundedBy")}),s()}):(n=new ymaps.Map("map-progects",{center:o,zoom:12,controls:["zoomControl"]},{searchControlProvider:"yandex#search",suppressMapOpenBlock:!0,restrictMapArea:t}),s())}):(n=new ymaps.Map("map-progects",{center:[55.76,37.64],zoom:12,controls:["zoomControl"]},{searchControlProvider:"yandex#search"}),s())}))}();var openAkordeon=function(e){var t=e.closest(".proposal__project"),o=t.querySelector(".proposal__project-text"),n=t.querySelector(".proposal__gallery"),i=t.querySelector(".proposal__project-mark"),s=t.querySelector(".button--update"),r=t.querySelector(".js-gallery"),l=t.querySelector(".js-gallery-in-popup"),t=t.querySelector(".js-single-image");e.classList.toggle("opened"),o.classList.toggle("opened"),n&&n.classList.toggle("opened"),i&&i.classList.toggle("opened"),s&&s.classList.toggle("opened");s=e.querySelector(".button-details__text");e.classList.contains("opened")?s.textContent="Свернуть":s.textContent="Подробнее",r&&!r.swiper&&window.initSlider(r),l&&!l.swiper&&window.initSliderInPopup(l),t&&!e.classList.contains("opened")&&t.remove()},onOpenAkordeon=function(e){e=e.target.closest(".button-details");e&&openAkordeon(e)},initProjectAccordion=function(){var e=document.querySelectorAll(".proposal__project");0<e.length&&e.forEach(function(e){var t,o,n,i;e.classList.contains("is-inited")||(i=e.querySelector(".proposal__project-text"),t=e.querySelector(".button-details"),i&&t&&(o=t.querySelector(".button-details__text"),n=i.getBoundingClientRect().height,i=+getComputedStyle(i).lineHeight.replace("px",""),n=Math.ceil(n/i),i=3,(i=e.querySelector(".proposal__project-title")?2:i)<n?e.classList.add("project_enough-lines_true"):(e.classList.add("project_enough-lines_false"),t.classList.contains("opened")?o.textContent="Свернуть":o.textContent="Подробнее"),e.classList.add("is-inited")))}),document.addEventListener("click",onOpenAkordeon)};initProjectAccordion(),window.initProjectAccordion=initProjectAccordion,window.openAkordeon=openAkordeon,function(){var e,t,o,n,i,s=document.querySelector(".js-project-page__panel");s&&(s.classList.add("project-page__panel--js"),e=document.querySelector(".container--desktop-only"),t=e.getBoundingClientRect().height,o=s.getBoundingClientRect().height,n=e.querySelector(".info-banner"),i=0,n&&(i=n.getBoundingClientRect().height),t&&o&&(e.style.minHeight=o+50+i+"px"),new window.Sticky(".js-project-page__panel"))}(),function(){var e,o,n;function t(){var t;o.forEach(function(e){e.classList.remove("proposal__tab--active")}),this.classList.add("proposal__tab--active"),e=this.getAttribute("data-tab-name"),t=e,n.forEach(function(e){e.classList.value.includes(t)?e.classList.add("proposal__tab-item--active"):e.classList.remove("proposal__tab-item--active")})}o=document.querySelectorAll(".proposal__tab"),n=document.querySelectorAll(".proposal__tab-item"),o.forEach(function(e){e.addEventListener("click",t)})}(),function(){var e,t,o,n,i=document.querySelectorAll(".js-project-page__text");i.length&&(e=document.documentElement.clientWidth,t=!1,o=function(e){var t,o;e.target.classList.contains("js-project-page__text-btn")&&(t=e.target,o=t.parentElement,e=o.querySelector(".project-page__text-container"),t=t.querySelector(".project-page__text-btn-caption"),o.classList.toggle("project-page__text--collapsed"),o.classList.contains("project-page__text--collapsed")?(e.style.height="190px",t.textContent="Показать полностью"):(e.style.height=e.scrollHeight+"px",t.textContent="Скрыть"))},n=function(){Array.prototype.forEach.call(i,function(e){var t=e.querySelector(".project-page__text-container");190<t.scrollHeight&&(e.classList.add("project-page__text--collapsed","project-page__text--js"),t.style.height="190px")}),document.addEventListener("click",o),t=!0},e<window.const.resolution.TABLET&&n(),window.addEventListener("resize",function(){e!==document.documentElement.clientWidth&&((e=document.documentElement.clientWidth)<window.const.resolution.TABLET?t||n():(Array.prototype.forEach.call(i,function(e){var t=e.querySelector(".project-page__text-container"),o=e.querySelector(".project-page__text-btn-caption");e.classList.remove("project-page__text--collapsed","project-page__text--js"),t.style.height="",o.textContent="Показать полностью"}),document.removeEventListener("click",o),t=!1))}))}(),function(){var t,e,o,n,i,s,r,l,c=document.querySelector(".js-project-vote"),a=document.querySelector(".js-vote-popup");c&&a&&(t=c.querySelector(".js-project-vote__submit-form form"),e=c.querySelector(".js-project-vote__revoke-btn"),o=a.querySelector(".js-vote-popup__revoke-btn"),n=null,i=+c.querySelector(".js-vote-results__value--approve").textContent.replace(/\s+/g,""),s=+c.querySelector(".js-vote-results__value--reject").textContent.replace(/\s+/g,""),r=c.querySelector(".js-vote-results__indicator"),l=function(e){e.preventDefault(),c.classList.remove("project-vote--voted"),t.querySelector(".project-vote__vote-btn--selected").classList.remove("project-vote__vote-btn--selected"),t.reset(),a.classList.remove("vote-popup--shown"),clearTimeout(n)},c.classList.add("project-vote--js"),r.style.width=Math.trunc(i/(i+s)*100)+"%",t.addEventListener("click",function(e){!e.target.classList.contains("project-vote__vote-btn")||e.target.classList.contains("project-vote__vote-btn--selected")||e.target.classList.contains("project-vote__vote-btn--disabled")||(c.classList.add("project-vote--voted"),e.target.classList.add("project-vote__vote-btn--selected"),c.querySelector("input").dispatchEvent(new Event("change")),a.classList.add("vote-popup--shown"),n=setTimeout(function(){a.classList.remove("vote-popup--shown")},5e3))}),e.addEventListener("click",l),o.addEventListener("click",l))}(),function(){var e,t=document.querySelector(".js-projects-list");t&&(e=new window.Ellipsis({lines:3}),t=t.querySelectorAll(".project-item__title"),e.add(t))}(),function(){var e,t,o;document.querySelector(".proposal-winners__show-map-btn")&&(e=document.querySelector(".proposal-winners__show-map-btn"),t=document.querySelector(".proposal-winners__map"),o=document.querySelector(".proposal-winners__close-map-btn"),e.addEventListener("click",function(){t.classList.add("proposal-winners__map--show")}),o.addEventListener("click",function(){t.classList.remove("proposal-winners__map--show")}))}();var toggleActiveClass=function(e){e.forEach(function(e){var t=e.querySelector('input[type="radio"]');t&&e.classList.toggle("proposal__project--active",t.checked)})},initProposalProjects=function(){var e,n=document.querySelectorAll(".proposal__project");n.length&&(toggleActiveClass(n),(e=document.querySelector(".proposal form"))&&!e.classList.contains("is-inited")&&(e.addEventListener("change",function(e){toggleActiveClass(e.currentTarget.querySelectorAll(".proposal__project"));for(var e=e.target.closest(".proposal__project").querySelector(".button-details"),t=0;t<n.length;t++){var o=n[t].querySelector(".button-details");o.classList.contains("opened")&&window.openAkordeon(o)}window.openAkordeon(e)}),e.classList.add("is-inited")))};initProposalProjects(),window.initProposalProjects=initProposalProjects;var initImgUpload=function(){function s(e,t,o){t.classList.add("image-loaded");var n,i,s,n=((n=document.createElement("button")).setAttribute("type","button"),n.setAttribute("aria-label","удалить загруженное изображение"),n);i=t,s=e,n.addEventListener("click",function(){i.remove(),r(s)||l(s)||c(s)},{once:!0}),t.appendChild(n),o&&t.append(o)}function r(e){return e.querySelector(".image-uploads__image-wrapper:not(.image-loaded)")}function l(e){return 5<=e.querySelectorAll(".image-uploads__image-wrapper").length}function c(e,t){var o,n,i=((n=document.createElement("div")).classList.add("image-uploads__image-wrapper"),n),n=(o=t,(n=document.createElement("input")).classList.add("visually-hidden"),n.setAttribute("type","file"),n.setAttribute("name",o),n.setAttribute("accept","image/png, image/jpeg, image/jpg, image/gif"),n.setAttribute("accept","image/png, image/jpeg, image/jpg, image/gif"),n.setAttribute("aria-label","user-images"),n);a(n,i,t);(t=document.createElement("span")).innerHTML="Загрузить изображение";i.append(n,t),e.append(i)}function a(e,n,i){e.addEventListener("change",function(e){var e=e.target.files[0],o=new FileReader;o.addEventListener("load",function(){var e,t,t=(e=o.result,(t=document.createElement("img")).setAttribute("src",e),t);s(d,n,t),r(d)||l(d)||c(d,i)}),o.readAsDataURL(e)})}var t,e,d=document.querySelector(".js-upload-image-container");if(d){var o=document.querySelectorAll(".image-uploads__image-wrapper"),n=" ";if(0<o.length)for(var i=0;i<o.length;i++){var u=o[i].querySelector('input[type="file"]');if(u){u=u.getAttribute("name");if(u){n=u;break}}}t=d,0<(e=document.querySelectorAll('.image-uploads__image-wrapper input[type="file"]')).length&&e.forEach(function(e){l(t)&&e.parentNode.remove()}),o.forEach(function(e){e.querySelector("img")?s(d,e):a(e.querySelector('input[type="file"]'),e,n)})}};function initRangeSlider(s){var r,e,t,o;!s||(r=document.getElementById(s.dataset.input))&&(e=parseInt(s.dataset.min,10),t=parseInt(s.dataset.max,10),o=r.value||t/2,r.dataset.required,r.parentNode.querySelector(".error-field"),window.noUiSlider.create(s,{start:o,behaviour:"snap",connect:"lower",step:parseInt(s.dataset.step,10),range:{min:[e],max:[t]},pips:{mode:"steps",stepped:!0,density:4},tooltips:!0,format:window.wNumb({decimals:0})}),s.noUiSlider.on("start",function(e,t){s.classList.remove("slide-disabled")}),s.noUiSlider.on("change",function(e,t){var t=e[t],o=Math.max(e),n=s.querySelectorAll(".noUi-marker-horizontal.noUi-marker-sub");if(r.value=t,r.dispatchEvent(new Event("change")),n)for(var i=0;i<n.length;i++)i<=o-2?n[i].classList.add("form-range__accent"):n[i].classList.remove("form-range__accent")}),s.addEventListener("click",function(e){s.removeAttribute("disabled"),r.removeAttribute("disabled")}))}initImgUpload(),document.querySelectorAll(".js-poll-range").forEach(function(e){initRangeSlider(e)}),function(){var e=document.querySelectorAll(".js-ajax-wrapper"),t=new MutationObserver(function(e){Object.values(e).forEach(function(e){"attributes"===e.type&&(0<(e=document.querySelectorAll(".info-banner")).length&&e.forEach(function(e){window.initInfoBannerToggle(e)}),0<(e=document.querySelectorAll(".js-ajax-wrapper select:not([multiple])")).length&&e.forEach(function(e){e.getAttribute("data-ssid")||window.addSelect(e)}),0<(e=document.querySelectorAll(".js-ajax-wrapper select[multiple]")).length&&e.forEach(function(e){e.getAttribute("data-ssid")||window.addMultipleSelect(e)}))})});0<e.length&&e.forEach(function(e){t.observe(e,{attributes:!0,childList:!0,subtree:!0})})}(),function(){var e,t,o="js_hide",n=document.querySelector(".js_short_list"),i=document.querySelector(".js_short_list-category"),s=document.querySelector(".js_short_list + .js_show_all"),r=!1;(n&&s||i&&s)&&(e=n.querySelectorAll("li")||i.querySelectorAll("li"),(t=function(){e.forEach(function(e,t){(4<t&&window.innerWidth<768||7<t&&window.innerWidth<1024&&768<=window.innerWidth)&&e.classList.add(o)}),i&&8<e.length&&(s.style.display="block",e.forEach(function(e,t){r=8<t?(e.classList.add(o),!0):(e.classList.remove(o),!1)})),r=!0})(),s.addEventListener("click",function(){s.style.display="",r?(e.forEach(function(e){e.classList.remove(o)}),r=!1,s.classList.add("is-shown")):(t(),s.classList.remove("is-shown"))}))}(),function(){var o,n,e=document.querySelectorAll('[data-id="other-checkbox"]'),t=document.querySelectorAll('[data-id="other-radio"]'),i="hide";e&&e.forEach(function(e){e.addEventListener("change",function(e){var t=e.target.parentElement.querySelector(".js-other-textarea");e.target.checked?t.classList.remove(i):t.classList.add(i)})}),t&&(o=null,n=function(e){var t=e.parentElement.querySelector(".js-other-textarea");t&&(e===o?t.classList.remove(i):t.classList.add(i))},t.forEach(function(e){var e=e.getAttribute("name"),t=document.querySelectorAll('[name="'+e+'"]');t.forEach(function(e){e.addEventListener("change",function(){n(o=e),t.forEach(function(e){n(e)})})})}))}(),document.addEventListener("click",function(e){var t,o,n,i;e.target.classList.contains("js-single-image-link")&&(e.preventDefault(),t=e.target,(i=t.closest(".js-gallery-full-wrap")).querySelector(".js-single-image")||(o=i.querySelector(".js-gallery-full"),n='<button class="gallery-full__btn gallery-full__btn--close js-single-photo-close-btn" type="button"><span class="visually-hidden">Закрыть</span><svg width="16" height="16"><use xlink:href="img/sprite.svg#icon-close"></use></svg></button><div class="gallery-full__image js-single-photo-frame"><img src="'+t.querySelector("img").getAttribute("src")+'"></div>',(t=document.createElement("div")).classList.add("project__gallery-full","gallery-full","opened","js-single-image"),t.innerHTML=n,(n=i.querySelector(".button-details")).classList.contains("opened")||window.openAkordeon(n),o&&(window.galleryInSliderReset(i),o.after(t)))),e.target.closest(".js-single-photo-close-btn")&&e.target.closest(".js-single-photo-close-btn").closest(".js-single-image").remove()}),function(){var n,i,e,t,s,o="js-hide",r=document.querySelector(".special-popup"),l=document.querySelectorAll(".js-open-popup");r&&l&&(n=document.documentElement,i={"font-size":!0,"font-family":!0,theme:!0},e=r.querySelector(".js-close-popup"),t=r.querySelectorAll("[data-property]"),s=r.querySelector(".js-special-popup__reset"),t.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t,o="[data-property="+e.target.getAttribute("data-property")+"]";r.querySelectorAll(o).forEach(function(e){e.classList.remove("active")}),e.target.classList.add("active"),e=e.currentTarget,t=e.dataset.property,e=e.dataset.value,n.classList.forEach(function(e){new RegExp(t).test(e)&&n.classList.remove(e)}),"default"!==e?(i[t]=!1,n.classList.add("mod-"+t+"-"+e)):i[t]=!0,"font-size"===t&&window.adjustPageContentTopPadding(),s.disabled=i["font-size"]&&i["font-family"]&&i.theme})}),s.addEventListener("click",function(){n.className.split(" ").forEach(function(e){-1!==e.indexOf("mod-")&&n.classList.remove(e)}),t.forEach(function(e){e.classList.toggle("active","default"===e.dataset.value)}),s.disabled=!0}),l.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),r.classList.remove(o),n.clientWidth<window.const.resolution.DESKTOP&&window.bodyScrollLock.disableBodyScroll(r)})}),e.addEventListener("click",function(){r.classList.add(o),n.clientWidth<window.const.resolution.DESKTOP&&window.bodyScrollLock.enableBodyScroll(r)}),window.addEventListener("keydown",function(e){e.keyCode===window.const.keyCode.ESC&&(e.preventDefault(),r.classList.add(o),n.clientWidth<window.const.resolution.DESKTOP&&window.bodyScrollLock.enableBodyScroll(r))}))}(),function(){var t,o=document.querySelector(".js-social__link--subscribe, .js-social__link--unsubscribe");o&&(t=o.querySelector(".social__link-text"),o.addEventListener("click",function(e){e.preventDefault(),o.classList.contains("social__link--subscribe")?(t.textContent="Отписаться",o.classList.remove("social__link--subscribe"),o.classList.add("social__link--unsubscribe")):(t.textContent="Подписаться",o.classList.add("social__link--subscribe"),o.classList.remove("social__link--unsubscribe"))}))}(),window.initTable=function(){var e;(e=document.querySelectorAll(".table-fixed table")).length&&Array.prototype.forEach.call(e,function(e){var t=e.scrollWidth;e.style="min-width: "+t+"px;"}),(e=document.querySelectorAll(".table-fixed")).length&&Array.prototype.forEach.call(e,function(e){return new window.SimpleBar(e,{autoHide:!1})}),(e=document.querySelectorAll(".table-fixed tbody")).length&&Array.prototype.forEach.call(e,function(e){return new window.SimpleBar(e,{autoHide:!1})})},window.initTable(),function(){var t,o;t=document.querySelector(".table-fixed--all-screen table tbody .simplebar-content-wrapper"),o=document.querySelector(".table-popup__header"),(t||o)&&t.addEventListener("scroll",function(){var e=document.querySelector(".table-fixed--all-screen table tr:first-child");e&&(e=e.scrollHeight+16,50<t.scrollTop&&(o.classList.add("table-popup__header--scroll"),o.style="top: "+e+"px;"),t.scrollTop<50&&o.classList.remove("table-popup__header--scroll"))})}(),function(){var e,t=document.documentElement.clientWidth,o=document.querySelector(".activity-tabs__list");!o||(e=o.querySelector(".activity-tabs__item--active"))&&(e=e.offsetLeft,t<window.const.resolution.TABLET&&(o.scrollLeft=e-16))}(),function(){var e,t=document.querySelectorAll(".js-fit-text");t.length&&((e=function(){t.forEach(function(e){e.style.fontSize="";for(var t=parseInt(getComputedStyle(e).fontSize,10),o=parseInt(getComputedStyle(e).lineHeight,10);2<=e.offsetHeight/o;)e.style.fontSize=--t+"px"})})(),window.addEventListener("resize",function(){setTimeout(e,50)}))}(),function(){window.openText=function(e){Array.prototype.forEach.call(e,function(e){var t=e.querySelector(".js-text-hidden__btn"),o=t.querySelector("span"),n=e.querySelector(".text-hidden__container"),i=e.querySelector(".text-hidden__btn-wrapper");(t||n||i)&&(54<n.scrollHeight?(n.classList.add("text-hidden__container--close"),t.addEventListener("click",function(e){e.preventDefault(),t.classList.toggle("text-hidden__btn--open"),n.classList.toggle("text-hidden__container--close"),i.classList.toggle("text-hidden__btn-wrapper--open"),o.textContent="Развернуть"===o.textContent?"Свернуть":"Развернуть"})):i.classList.add("text-hidden__btn-wrapper--hidden"))})};var e=document.querySelectorAll(".answers__discussion-col.js-text-hidden");e.length&&window.openText(e)}(),function(){var o,e,n=document.querySelector(".js-page-body__up-btn"),t=document.querySelector("footer .container");n&&(o=document.querySelector(".js-cookie__button"),t&&((e=function(){t.getBoundingClientRect().right+n.offsetWidth<document.documentElement.clientWidth?(n.style.left=t.getBoundingClientRect().right-parseInt(getComputedStyle(t).paddingRight,10)+16+"px",n.style.right=""):(n.style.left="",n.style.right="16px"),o&&(n.style.bottom=window.innerHeight-o.getBoundingClientRect().bottom+(o.getBoundingClientRect().height-n.getBoundingClientRect().height)/2+1+"px")})(),window.addEventListener("resize",function(){e()})),n.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),document.addEventListener("click",function(e){var t;(e.target.classList.contains("js-special-popup__btn-size")||e.target.classList.contains("js-special-popup__reset"))&&o&&(t=o.offsetHeight,e=window.innerHeight-o.getBoundingClientRect().bottom,n.style.height=t+"px",n.style.width=t+"px",n.style.bottom=e+"px")}))}(),function(){var e,t,o,n,i,s=document.querySelector(".js-user-menu");s&&(e=s.querySelector(".js-user-menu__dropdown-btn"),t=e.querySelector(".user-menu__dropdown-btn-text"),o=s.querySelector(".js-user-menu__overlay"),n=s.querySelector(".js-user-menu__list"),i=function(){s.classList.remove("user-menu--open"),o.classList.remove("user-menu__overlay--shown"),t.textContent="Открыть меню пользователя"},e.addEventListener("click",function(){s.classList.contains("user-menu--open")?(i(),n.style.height=""):(s.classList.add("user-menu--open"),o.classList.add("user-menu__overlay--shown"),t.textContent="Закрыть меню пользователя",n.style.height=n.scrollHeight+"px")}),o.addEventListener("click",i),document.addEventListener("keydown",function(e){e.keyCode===window.const.keyCode.ESC&&o.classList.contains("user-menu__overlay--shown")&&(e.preventDefault(),i())}))}(),function(){var t,n,o,i,e=document.getElementById("widget_count_page"),s=document.getElementById("widget_count_all"),r=document.getElementById("widget_timer"),l=document.getElementById("widget_width_input"),c=document.querySelector(".widget_block__preview__block"),a=5,d=15,u=2e3,p=Math.ceil(d/a+1);(e||s||r||c)&&(o=null,t=1,n=function(){$(".swiper-pagination").pagination({items:d,itemsOnPage:a,displayedPages:3,edges:1,cssStyle:"",currentPage:1,prevText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-prev"></use></svg>',nextText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-next"></use></svg>',onPageClick:function(e,t){o.slideTo(e-1,400,!1)}})},o=new Swiper(".swiper-container",{speed:400,autoplay:{delay:u},watchOverflow:!0,grabCursor:!0,loop:!0,allowTouchMove:!1,hashNavigation:!1,on:{init:function(){n()},slideChangeTransitionStart:function(){$(".swiper-pagination").pagination({items:d,itemsOnPage:a,displayedPages:3,edges:1,cssStyle:"",currentPage:t++,prevText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-prev"></use></svg>',nextText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-next"></use></svg>',onPageClick:function(e,t){o.slideTo(e-1,400,!1)}}),t===p&&(t=1)}}}),o=document.querySelector(".swiper-container").swiper,(i=document.createElement("div")).classList.add("error"),e&&e.addEventListener("focusout",function(e){var o;""!==e.srcElement.value&&(t=1,0<e.srcElement.value&&""!=e.srcElement.value?(i.remove(),this.style.border="1px solid #e3e8ee",a=Number(e.srcElement.value),p=Math.ceil(d/a+1),(o=document.querySelector(".swiper-container").swiper).destroy(!0,!0),o=new Swiper(".swiper-container",{speed:400,autoplay:{delay:u},watchOverflow:!0,grabCursor:!0,loop:!0,allowTouchMove:!1,hashNavigation:!1,on:{init:function(){n()},slideChangeTransitionStart:function(){$(".swiper-pagination").pagination({items:d,itemsOnPage:a,displayedPages:3,edges:1,cssStyle:"",currentPage:t++,prevText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-prev"></use></svg>',nextText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-next"></use></svg>',onPageClick:function(e,t){o.slideTo(e-1,400,!1)}}),t===p&&(t=1)}}}),o=document.querySelector(".swiper-container").swiper):(this.parentElement.append(i),this.style.border="1px solid #F3A8A8",i.innerHTML="Количество элементов на странице не может быть 0"))}),s&&s.addEventListener("focusout",function(e){var o;""!==e.srcElement.value&&(t=1,0<e.srcElement.value&&""!=e.srcElement.value?(i.remove(),this.style.border="1px solid #e3e8ee",d=Number(e.srcElement.value),p=Math.ceil(d/a+1),(o=document.querySelector(".swiper-container").swiper).destroy(!0,!0),o=new Swiper(".swiper-container",{speed:400,autoplay:{delay:u},watchOverflow:!0,grabCursor:!0,loop:!0,allowTouchMove:!1,hashNavigation:!1,on:{init:function(){n()},slideChangeTransitionStart:function(){$(".swiper-pagination").pagination({items:d,itemsOnPage:a,displayedPages:3,edges:1,cssStyle:"",currentPage:t++,prevText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-prev"></use></svg>',nextText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-next"></use></svg>',onPageClick:function(e,t){o.slideTo(e-1,400,!1)}}),t===p&&(t=1)}}}),o=document.querySelector(".swiper-container").swiper):(this.parentElement.append(i),this.style.border="1px solid #F3A8A8",i.innerHTML="Общее количество элементов не может быть 0"))}),r&&r.addEventListener("focusout",function(e){var o;""!==e.srcElement.value&&(t=1,0<e.srcElement.value&&""!=e.srcElement.value?(i.remove(),this.style.border="1px solid #e3e8ee",(o=document.querySelector(".swiper-container").swiper).destroy(!0,!0),u=e.srcElement.value,o=new Swiper(".swiper-container",{speed:400,autoplay:{delay:u},watchOverflow:!0,grabCursor:!0,loop:!0,allowTouchMove:!1,hashNavigation:!1,on:{init:function(){n()},slideChangeTransitionStart:function(){$(".swiper-pagination").pagination({items:d,itemsOnPage:a,displayedPages:3,edges:1,cssStyle:"",currentPage:t++,prevText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-prev"></use></svg>',nextText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-next"></use></svg>',onPageClick:function(e,t){o.slideTo(e-1,400,!1)}}),t===p&&(t=1)}}}),o=document.querySelector(".swiper-container").swiper):(this.parentElement.append(i),this.style.border="1px solid #F3A8A8",i.innerHTML="Время не может быть пустым"))}),l&&l.addEventListener("focusout",function(e){var o;""!==e.srcElement.value&&(t=1,320<=e.srcElement.value?(c.style.width=e.srcElement.value+"px",i.remove(),this.style.border="1px solid #e3e8ee",(o=document.querySelector(".swiper-container").swiper).destroy(!0,!0),o=new Swiper(".swiper-container",{speed:400,autoplay:{delay:u},watchOverflow:!0,grabCursor:!0,loop:!0,allowTouchMove:!1,hashNavigation:!1,on:{init:function(){n()},slideChangeTransitionStart:function(){$(".swiper-pagination").pagination({items:d,itemsOnPage:a,displayedPages:3,edges:1,cssStyle:"",currentPage:t++,prevText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-prev"></use></svg>',nextText:'<svg width="18" height="10" viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg"><use xlink:href="img/sprite.svg#icon-paginator-next"></use></svg>',onPageClick:function(e,t){o.slideTo(e-1,400,!1)}}),t===p&&(t=1)}}}),o=document.querySelector(".swiper-container").swiper):(this.parentElement.append(i),this.style.border="1px solid #F3A8A8",i.innerHTML="Ширина должна быть не менее 320px"))}))}(),function(){var e=document.querySelector(".js-widget-open"),t=document.querySelector(".widget-popup");e&&e.addEventListener("click",function(){t.classList.add("popup--shown")})}();var initSelects=function(){var i,s,t=window.Scrollbar,e=document.querySelectorAll(".js-select-type"),o=document.querySelectorAll(".js-select-level"),n=document.querySelectorAll(".js-select-preview"),r=function(e){new window.SlimSelect({select:e,showSearch:!1,placeholder:"Тип виджета",data:i,afterOpen:function(){t.init(document.querySelector(".form-select .ss-list"),{continuousScrolling:!1})}})&&t.init(document.querySelector(".form-select .ss-main .ss-content .ss-list"),{continuousScrolling:!1})};0<o.length&&o.forEach(function(e){e=e,new window.SlimSelect({select:e,showSearch:!1,afterOpen:function(){t.init(document.querySelector(".form-select .ss-list"),{continuousScrolling:!1})}})&&t.init(document.querySelector(".form-select .ss-main .ss-content .ss-list"),{continuousScrolling:!1})}),0<e.length&&e.forEach(function(e){var n;n=e,new window.SlimSelect({select:n,showSearch:!1,onChange:function(e){i=new Array,s=new Object;for(var t=0;t<e.length;t++)(s={}).text=e[t].value,i.push(s);var o=document.querySelector("[data-second-select="+n.dataset.select+"]");1<i.length?o.classList.add("ss-arrow-show"):o.classList.remove("ss-arrow-show"),r(o.querySelector(".js-select-preview"))},afterOpen:function(){t.init(document.querySelector(".form-select .ss-list"),{continuousScrolling:!1})}})&&t.init(document.querySelector(".form-select .ss-main .ss-content .ss-list"),{continuousScrolling:!1})}),0<n.length&&n.forEach(function(e){r(e)})};initSelects();