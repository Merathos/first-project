"use strict";window.const={keyCode:{ENTER:13,ESC:27},resolution:{DESKTOP:1200,TABLET:768,MOBILE:320}},function(){var e=document.querySelector(".js_cookie"),t=document.querySelector(".js_cookie .js_btn");e&&t&&(document.body.classList.add("page-body--cookie"),t.addEventListener("click",function(){e.classList.add("js_hide"),document.body.classList.remove("page-body--cookie")}))}(),function(){var t=document.querySelector(".filter");if(t){var e=t.querySelector(".filter__open-btn");t.classList.add("filter--js"),e.addEventListener("click",function(e){t.classList.toggle("filter--open"),e.currentTarget.textContent=t.classList.contains("filter--open")?"Скрыть фильтры":"Фильтры"})}}(),function(){function e(e){new SlimSelect({select:e,showSearch:!1,afterClose:function(){t.destroy(document.querySelector(".form-select .ss-list"))},afterOpen:function(){t.init(document.querySelector(".form-select .ss-list"),{continuousScrolling:!1})}})&&t.init(document.querySelector(".form-select .ss-main .ss-content .ss-list"),{continuousScrolling:!1})}var t=window.Scrollbar,n=document.querySelector("#projects-select"),o=document.querySelector("#category-select"),s=document.querySelector("#vote-select");n&&e(n),o&&e(o),s&&e(s)}(),function(){var e=document.querySelectorAll(".text-hidden");e.length&&Array.prototype.forEach.call(e,function(e){var t=e.querySelector(".text-hidden__btn"),n=e.querySelector(".text-hidden__btn span"),o=e.querySelector(".text-hidden__container"),s=e.querySelector(".answers__button-wrapper");(t||o||s)&&t.addEventListener("click",function(e){e.preventDefault(),t.classList.toggle("text-hidden__btn--open"),o.classList.toggle("text-hidden__container--open"),s.classList.toggle("answers__button-wrapper--open"),n.textContent="Развернуть"===n.textContent?"Свернуть":"Развернуть"})})}(),function(){var e=document.querySelector(".location-switcher");e&&e.classList.add("location-switcher--js")}(),function(){var e=document.querySelector(".page-header");if(e){var t=e.querySelector(".page-header__bar"),n=e.querySelector(".main-menu"),o=n.querySelector(".container"),s=e.querySelector(".menu-btn"),c=s.querySelector(".menu-btn__text"),r=function(){n.style.height=e.classList.contains("page-header--open-menu")&&document.documentElement.clientWidth<window.const.resolution.DESKTOP?window.innerHeight-t.offsetHeight+"px":""};s.addEventListener("click",function(){e.classList.toggle("page-header--open-menu"),r(),e.classList.contains("page-header--open-menu")?(bodyScrollLock.disableBodyScroll(o),s.classList.add("menu-btn--close"),c.textContent="Закрыть меню"):(bodyScrollLock.enableBodyScroll(o),s.classList.remove("menu-btn--close"),c.textContent="Открыть меню")}),window.addEventListener("resize",function(){r(),e.classList.contains("page-header--open-menu")&&document.documentElement.clientWidth>=window.const.resolution.DESKTOP&&(e.classList.remove("page-header--open-menu"),s.classList.remove("menu-btn--close"),document.body.classList.remove("page-body--no-scroll"))})}}(),function(){var e=document.querySelector(".page-header");if(e){var t=function(){0<window.pageYOffset?e.classList.add("page-header--above-content"):e.classList.remove("page-header--above-content")},n=function(){document.body.style.paddingTop=e.offsetHeight+"px"};e.classList.add("page-header--js"),n(),t(),document.addEventListener("scroll",t),window.addEventListener("resize",function(){e.classList.remove("page-header--above-content"),n(),t()})}}(),function(){var e=document.querySelector(".projects__list");if(e){var t=Ellipsis({lines:3}),n=e.querySelectorAll(".project-item__title");t.add(n)}}(),function(){var s=document.getElementById("poll-range");s&&(noUiSlider.create(s,{start:[5],behaviour:"snap",connect:"lower",step:1,range:{min:[1],max:[10]},pips:{mode:"steps",stepped:!0,density:4},tooltips:!0,format:wNumb({decimals:0})}),s.noUiSlider.on("update",function(e){var t=Math.max(e),n=s.querySelectorAll(".noUi-marker-horizontal.noUi-marker-sub");if(n)for(var o=0;o<n.length;o++)o<=t-2?n[o].classList.add("form-range__accent"):n[o].classList.remove("form-range__accent")}))}(),function(){var n="js_hide",e=document.querySelector(".js_short_list"),t=document.querySelector(".js_short_list + .js_show_all");if(e&&t){var o=e.querySelectorAll("li");o.forEach(function(e,t){4<t&&e.classList.add(n)}),t.addEventListener("click",function(){o.forEach(function(e){e.classList.remove(n),t.classList.add(n)})})}}(),function(){var t=document.querySelector(".social__link--subscribe, .social__link--unsubscribe");if(t){t.addEventListener("click",function(e){e.preventDefault(),t.classList.contains("social__link--subscribe")?(t.textContent="Отписаться",t.classList.remove("social__link--subscribe"),t.classList.add("social__link--unsubscribe")):(t.textContent="Подписаться",t.classList.add("social__link--subscribe"),t.classList.remove("social__link--unsubscribe"))})}}(),function(){var e=document.querySelector(".page-body__up-btn"),t=document.querySelector("footer .container");if(e){if(t){var n=function(){t.getBoundingClientRect().right+e.offsetWidth<document.documentElement.clientWidth?(e.style.left=t.getBoundingClientRect().right-parseInt(getComputedStyle(t).paddingRight,10)+16+"px",e.style.right=""):(e.style.left="",e.style.right="16px")};n(),window.addEventListener("resize",function(){n()})}e.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})}}(),function(){var e=document.querySelector(".user-menu");if(e){var t=e.querySelector(".user-menu__dropdown-btn"),n=t.querySelector(".user-menu__dropdown-btn-text"),o=e.querySelector(".user-menu__overlay"),s=e.querySelector(".user-menu__list"),c=function(){e.classList.remove("user-menu--open"),o.classList.remove("user-menu__overlay--shown"),n.textContent="Открыть меню"};t.addEventListener("click",function(){e.classList.toggle("user-menu--open"),o.classList.toggle("user-menu__overlay--shown"),s.style.height=0===s.offsetHeight?s.scrollHeight+"px":"",n.textContent=e.classList.contains("user-menu--open")?"Закрыть меню":"Открыть меню"}),o.addEventListener("click",c),document.addEventListener("keydown",function(e){e.keyCode===window.const.keyCode.ESC&&o.classList.contains("user-menu__overlay--shown")&&(e.preventDefault(),c())})}}();